"use strict";(self.webpackChunkthis=self.webpackChunkthis||[]).push([[287],{2287:function(e,s,a){a.r(s);var l=a(4165),r=a(5861),c=a(4942),o=a(1413),n=a(885),i=a(2791),t=a(3073),d=a(9492),m=a(7689),u=a(1885),f=a.n(u),g=a(9085),v=a(6536),p=a(6725),h=a(184);s.default=function(){var e=(0,i.useRef)(new(f())),s=(0,m.s0)(),a=(0,i.useState)([{id:0,name:""}]),u=(0,n.Z)(a,2),x=u[0],N=u[1],b=JSON.parse(localStorage.getItem("user"))||"",j=(0,i.useState)({name:"",cnic:"",dob:"",email:"",phone:"",gender:"",role:"",password:""}),w=(0,n.Z)(j,2),C=w[0],y=w[1];function q(s){var a=s.target,l=a.name,r=a.value;e.current.showMessageFor(l),y((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,c.Z)({},l,r))}))}function _(){return(_=(0,r.Z)((0,l.Z)().mark((function e(){var a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.r4)(C);case 2:200===(a=e.sent).status?(g.Am.success("User Created"),s("/list-users")):a.status>=400&&g.Am.warn(a.message.message);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=(0,r.Z)((0,l.Z)().mark((function e(){var s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.ze)({_pageNo:1,_count:1e3});case 2:200===(s=e.sent).status?N(s.data.cities):s.status>=400&&g.Am.warn("failed to get cities");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(s){s.preventDefault(),e.current.allValid()?function(){_.apply(this,arguments)}():(e.current.showMessages(),g.Am.warn("Some Required Fields are Missing"))}return(0,i.useEffect)((function(){b.role===p.t.USER?s("/"):function(){S.apply(this,arguments)}()}),[]),(0,v.Z)("Create User"),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"my-8 card",children:[(0,h.jsx)("div",{className:"card-header border-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_account_profile_details","aria-expanded":"true","aria-controls":"kt_account_profile_details",children:(0,h.jsx)("div",{className:"card-title m-0",children:(0,h.jsx)("h3",{className:"fw-bolder m-0",children:"Create New User"})})}),(0,h.jsxs)("form",{id:"kt_account_profile_details",className:"collapse show",onSubmit:function(e){return Z(e)},children:[(0,h.jsx)("div",{id:"kt_account_profile_details_form",className:"form fv-plugins-bootstrap5 fv-plugins-framework",noValidate:"novalidate"}),(0,h.jsxs)("div",{className:"card-body border-top p-9",children:[(0,h.jsx)("div",{className:"row mb-6"}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Name"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsx)("input",{onChange:q,value:C.name,type:"text",name:"name",className:"form-control form-control-lg form-control-solid",placeholder:"Name"}),e.current.message("name",C.name,"required|min:3",{messgae:"Name is required",className:"text-danger"}),(0,h.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"CNIC"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsx)("input",{onChange:q,value:C.cnic,type:"text",name:"cnic",className:"form-control form-control-lg form-control-solid",placeholder:"CNIC"}),e.current.message("cnic",C.cnic,"required|min:13",{messgae:"CNIC is required",className:"text-danger"}),(0,h.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Date of Birth"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsx)("input",{onChange:q,value:C.dob,type:"date",name:"dob",className:"form-control form-control-lg form-control-solid",placeholder:"Date of birth"}),e.current.message("dob",C.dob,"required",{messgae:"DoB is required",className:"text-danger"}),(0,h.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Gender"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsxs)("select",{id:"gender",name:"gender",value:C.gender,className:"form-control form-control-lg form-control-solid",onChange:q,children:[(0,h.jsx)("option",{value:"",children:"Select"}),(0,h.jsx)("option",{value:"male",children:"male"}),(0,h.jsx)("option",{value:"female",children:"female"})]}),e.current.message("gender",C.gender,"required",{messgae:"Gender is required",className:"text-danger"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"City"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsxs)("select",{id:"city",name:"city_id",value:C.city_id,className:"form-control form-control-lg form-control-solid",onChange:q,children:[(0,h.jsx)("option",{value:"",children:"Select"}),x.map((function(e,s){return(0,h.jsx)("option",{value:e.id,children:e.name},s)}))]}),e.current.message("city",C.city_id,"required",{messgae:"City is required",className:"text-danger"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Phone"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsx)("input",{onChange:q,value:C.phone,type:"text",name:"phone",className:"form-control form-control-lg form-control-solid",placeholder:"Contact Number"}),e.current.message("phone",C.phone,"required|numeric|min:11",{messgae:"Phone is required",className:"text-danger"}),(0,h.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Email"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsx)("input",{onChange:q,value:C.email,type:"text",name:"email",className:"form-control form-control-lg form-control-solid",placeholder:"Email"}),e.current.message("email",C.email,"required|email",{messgae:"email is required",className:"text-danger"}),(0,h.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-3 col-form-label required fw-bold fs-6",children:"Password"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsx)("input",{onChange:q,value:C.password,type:"password",name:"password",className:"form-control form-control-lg form-control-solid",placeholder:"Password"}),e.current.message("password",C.password,"required|min:8",{messgae:"password is required",className:"text-danger"}),(0,h.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,h.jsxs)("div",{className:"row mb-6",children:[(0,h.jsx)("div",{className:"col-1"}),(0,h.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Role"}),(0,h.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,h.jsxs)("select",{id:"role",name:"role",value:C.role,className:"form-control form-control-lg form-control-solid",onChange:q,children:[(0,h.jsx)("option",{value:"",children:"Select"}),(0,h.jsx)("option",{value:"admin",children:p.t.RESEARCH_ASSISTANT},"1"),(0,h.jsx)("option",{value:"user",children:p.t.DATA_COLLECTOR},"2")]}),e.current.message("role",C.role,"required",{messgae:"Role is required",className:"text-danger"})]})]})]}),(0,h.jsxs)("div",{className:"card-footer d-flex justify-content-end py-6 px-9",children:[(0,h.jsx)("button",{type:"button",onClick:function(){y({name:"",cnic:"",dob:"",email:"",phone:"",gender:"",city:"",role:"",password:""})},className:"btn btn-light btn-active-light-primary me-2",children:"Discard"}),(0,h.jsx)("button",{type:"submit",className:"btn btn-primary",id:"kt_account_profile_details_submit",children:"Submit"})]})]})]})]})})}},6725:function(e,s,a){a.d(s,{t:function(){return l}});var l={ADMIN:"admin",USER:"user",RESEARCH_ASSISTANT:"Principal Investigator",DATA_COLLECTOR:"Data Collector"}},9492:function(e,s,a){a.d(s,{gC:function(){return m},Se:function(){return u},ze:function(){return d}});var l=a(1413),r=a(3144),c=a(5671),o=a(7976),n=(0,r.Z)((function e(){(0,c.Z)(this,e)}));n.listCities=function(e){var s="/api/city/list-cities?_pageNo=".concat(null===e||void 0===e?void 0:e._pageNo,"&_count=").concat(null===e||void 0===e?void 0:e._count);return o.Z.get(s)},n.createCity=function(e){return o.Z.post("api/city",(0,l.Z)({},e))},n.deleteCity=function(e){var s=e.id,a="api/city/".concat(s);return o.Z.delete(a)};var i=n,t=a(3984),d=function(e){return i.listCities(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,t.Z)(e)}))},m=function(e){return i.createCity(e).then((function(e){return{status:e.status,data:e.data,message:"Request Success"}})).catch((function(e){return(0,t.Z)(e)}))},u=function(e){var s=e.id;return i.deleteCity({id:s}).then((function(e){return{status:e.status,data:e.data,message:"Request Success"}})).catch((function(e){return(0,t.Z)(e)}))}}}]);
//# sourceMappingURL=287.0caccf14.chunk.js.map