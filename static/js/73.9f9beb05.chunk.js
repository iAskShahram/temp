"use strict";(self.webpackChunkthis=self.webpackChunkthis||[]).push([[73],{5579:function(t,e,n){n.r(e);var r=n(4165),a=n(1413),i=n(5861),s=n(885),c=n(2791),u=n(3513),o=n(5181),l=(n(3568),n(8185)),d=n(9085),p=(n(4666),n(6536)),f=n(9492),m=n(4434),g=n(184);e.default=function(){var t=(0,c.useState)(!1),e=(0,s.Z)(t,2),n=e[0],h=e[1],v=(0,c.useState)(1),x=(0,s.Z)(v,2),Z=x[0],w=x[1],b=(0,c.useState)(10),y=(0,s.Z)(b,2),C=y[0],_=y[1],S=(0,c.useState)([]),N=(0,s.Z)(S,2),j=N[0],k=N[1],A=(0,c.useState)(0),P=(0,s.Z)(A,2),R=P[0],T=P[1],E=[{name:"City Name",center:!0,selector:function(t){return t.name},cellExport:function(t){return t.name},wrap:!0},{name:"Created At",center:!0,selector:function(t){return t.created_at},cellExport:function(t){return t.created_at},wrap:!0,cell:function(t){var e;return null===(e=t.created_at)||void 0===e?void 0:e.split("T")[0]}},{name:"Created By",center:!0,selector:function(t){var e;return null===(e=t.created_by)||void 0===e?void 0:e.name},cellExport:function(t){var e;return null===(e=t.created_by)||void 0===e?void 0:e.name},wrap:!0},{name:"Actions",center:!0,selector:function(t){return t.id},wrap:!0,cell:function(t){return(0,g.jsx)("div",{className:"btn-group",children:(0,g.jsx)("button",{onClick:function(){return function(t){return L.apply(this,arguments)}(t.id)},className:"btn btn-danger btn-sm",type:"button",name:"options",id:"option2",children:(0,g.jsx)(l.dnY,{})})})}}],I={columns:E,data:j};function q(){return H.apply(this,arguments)}function H(){return(H=(0,i.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(!0),t.next=3,(0,f.ze)({_pageNo:Z,_count:C});case 3:e=t.sent,h(!1),200===e.status?(k(e.data.cities),T(e.data.total)):e.status>=400&&d.Am.warn("failed to get cities");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=(0,i.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you want to delete this city?")){t.next=3;break}return t.abrupt("return");case 3:if(parseInt(e)){t.next=5;break}return t.abrupt("return",d.Am.warn("City id is required"));case 5:return t.next=7,(0,f.Se)({id:e});case 7:200===(n=t.sent).status?(d.Am.success("Deleted Sucessfully"),q()):n.status>=400&&d.Am.warn(n.message.message);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,p.Z)("List Cities"),(0,c.useEffect)((function(){q()}),[Z,C]),(0,g.jsxs)("div",{className:"my-8 card",children:[(0,g.jsx)("div",{className:"card-header border-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_account_profile_details","aria-expanded":"true","aria-controls":"kt_account_profile_details",children:(0,g.jsx)("div",{className:"card-title m-0",children:(0,g.jsx)("h3",{className:"fw-bolder m-0",children:"Cities' List"})})}),(0,g.jsx)("div",{className:"card-body border-top p-9",children:(0,g.jsx)(o.Z,(0,a.Z)((0,a.Z)({},I),{},{children:(0,g.jsx)(u.ZP,{columns:E,data:j,noHeader:!0,highlightOnHover:!0,defaultSortField:"id",defaultSortAsc:!0,exportHeaders:!0,progressPending:n,progressComponent:(0,g.jsx)(m.Z,{text:"Loading Cities"}),pagination:!0,paginationServer:!0,paginationDefaultPage:Z,paginationPerPage:C,paginationTotalRows:R,paginationComponentOptions:{rowsPerPageText:"Rows per page:",rangeSeparatorText:"of",selectAllRowsItem:!0,selectAllRowsItemText:"Show All"},onChangePage:function(t){return w(Number(t))},onChangeRowsPerPage:function(t){return _(Number(t))}})}))}),(0,g.jsx)(d.Ix,{})]})}},9492:function(t,e,n){n.d(e,{gC:function(){return d},Se:function(){return p},ze:function(){return l}});var r=n(1413),a=n(3144),i=n(5671),s=n(7976),c=(0,a.Z)((function t(){(0,i.Z)(this,t)}));c.listCities=function(t){var e="/api/city/list-cities?_pageNo=".concat(null===t||void 0===t?void 0:t._pageNo,"&_count=").concat(null===t||void 0===t?void 0:t._count);return s.Z.get(e)},c.createCity=function(t){return s.Z.post("api/city",(0,r.Z)({},t))},c.deleteCity=function(t){var e=t.id,n="api/city/".concat(e);return s.Z.delete(n)};var u=c,o=n(3984),l=function(t){return u.listCities(t).then((function(t){return{status:t.status,data:t.data,message:"success"}})).catch((function(t){return(0,o.Z)(t)}))},d=function(t){return u.createCity(t).then((function(t){return{status:t.status,data:t.data,message:"Request Success"}})).catch((function(t){return(0,o.Z)(t)}))},p=function(t){var e=t.id;return u.deleteCity({id:e}).then((function(t){return{status:t.status,data:t.data,message:"Request Success"}})).catch((function(t){return(0,o.Z)(t)}))}}}]);
//# sourceMappingURL=73.9f9beb05.chunk.js.map