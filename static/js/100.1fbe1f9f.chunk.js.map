{"version":3,"file":"static/js/100.1fbe1f9f.chunk.js","mappings":"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","sources":["component/Reports/MeanReport.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { useUserProfile } from '../../context/UserContextProvider';\r\nimport { CONSTANTS } from '../../helpers/constant.js';\r\nimport { useTitle } from '../../helpers/custom-hooks';\r\nimport { listCities } from '../../store/actions/city.action.js';\r\nimport { getMeanReport } from '../../store/actions/report.action';\r\nimport { createMeanXLSXFile } from '../../utils/report.util.js';\r\nimport { PageCard } from '../commonComponents/Cards/HelperCards';\r\nimport { meanReportConstants as REPORT_CONSTANTS } from './report.constant.js';\r\n\r\nconst MeanReport = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst { getUserProfile_c } = useUserProfile();\r\n\r\n\tconst [USER, setUSER] = useState(getUserProfile_c());\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [cities, setCities] = useState([{}]);\r\n\tconst [centerName, setCenterName] = useState('');\r\n\tconst [formData, setFormData] = useState({\r\n\t\tstartingDate: null,\r\n\t\tendingDate: null,\r\n\t\tcity_id: null,\r\n\t});\r\n\tconst newDateObject = new Date();\r\n\tconst todaysDate = `${newDateObject.getFullYear()}-${String(newDateObject.getMonth() + 1).padStart(2, '0')}-${String(newDateObject.getDate()).padStart(2, '0')}`;\r\n\r\n\tuseTitle('Mean Reports');\r\n\tuseEffect(() => {\r\n\t\tif (!Object.keys(USER).length || USER.role?.toLowerCase().trim() === CONSTANTS.USER) {\r\n\t\t\tnavigate(\"/\");\r\n\t\t} else {\r\n\t\t\t_listCities();\r\n\t\t}\r\n\t}, []);\r\n\r\n\r\n\tconst handleFormChange = (e) => {\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\tfunction validate() {\r\n\t\tif (!formData.startingDate && !formData.endingDate) {\r\n\t\t\ttoast.info('Please select atleast one date');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync function _listCities() {\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconst response = await listCities({\r\n\t\t\t\t_pageNo: 0,\r\n\t\t\t\t_count: 999\r\n\t\t\t});\r\n\t\t\tsetCities(response.data.cities);\r\n\t\t\tsetIsLoading(false);\r\n\t\t} catch (error) {\r\n\t\t\ttoast.error(error.message);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function generateReport() {\r\n\t\tif (!validate()) return;\r\n\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconst response = await getMeanReport(formData);\r\n\t\t\tif (response.status >= 400) {\r\n\t\t\t\ttoast.error(response.message.message);\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconsole.log({ response });\r\n\t\t\tawait createMeanXLSXFile({ data: response.data, center: centerName });\r\n\t\t\tsetIsLoading(false);\r\n\t\t} catch (err) {\r\n\t\t\ttoast.error(err.message);\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<PageCard title=\"Mean Reports\" isLoading={isLoading}>\r\n\r\n\t\t\t\t<div className='row'>\r\n\t\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t\t<h5>Starting Date</h5>\r\n\t\t\t\t\t\t<input type='date' name='startingDate' className='form-control' value={formData.startingDate || ''} max={formData.endingDate || todaysDate} onChange={handleFormChange} disabled={isLoading} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t\t<h5>Ending Date</h5>\r\n\t\t\t\t\t\t<input type='date' name='endingDate' className='form-control' value={formData.endingDate || ''} max={todaysDate} min={formData.startingDate || ''} onChange={handleFormChange} disabled={isLoading} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='row mt-5'>\r\n\t\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t\t<h5>Center  <i style={{ fontWeight: 'normal' }}>(optional)</i></h5>\r\n\t\t\t\t\t\t<select className='form-control' name='city_id' onChange={(e) => { handleFormChange(e); setCenterName(e.target.options[e.target.selectedIndex].text.toLocaleLowerCase().includes('select center') ? '' : e.target.options[e.target.selectedIndex].text); }} disabled={isLoading} >\r\n\t\t\t\t\t\t\t<option value=''>Select Center</option>\r\n\t\t\t\t\t\t\t{cities.map((city, i) => (\r\n\t\t\t\t\t\t\t\t<option key={i} value={city.id}>{city.name}</option>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t{REPORT_CONSTANTS.map((singleEntityQuestions, i) => (\r\n\t\t\t\t\t<div key={i}>\r\n\t\t\t\t\t\t<Card className='border-1' key={i}>\r\n\t\t\t\t\t\t\t<Card.Text>\r\n\t\t\t\t\t\t\t\t<b>\r\n\t\t\t\t\t\t\t\t\t<span style={{\r\n\t\t\t\t\t\t\t\t\t\tfontSize: '1.1rem',\r\n\t\t\t\t\t\t\t\t\t}}> {singleEntityQuestions.heading} </span> -- Includes {`>`} </b>  {singleEntityQuestions.reportColumns.join(', ')}\r\n\r\n\t\t\t\t\t\t\t</Card.Text>\r\n\t\t\t\t\t\t</Card>\r\n\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t))}\r\n\r\n\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<div className='row'>\r\n\t\t\t\t\t<div className='col-12'>\r\n\t\t\t\t\t\t<button className='btn btn-primary float-end' type='button' onClick={generateReport} disabled={isLoading}> {isLoading ? 'Generating ...' : 'Generate Report'}</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</PageCard >\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default MeanReport;"],"names":["navigate","useNavigate","getUserProfile_c","useUserProfile","useState","USER","isLoading","setIsLoading","cities","setCities","centerName","setCenterName","startingDate","endingDate","city_id","formData","setFormData","newDateObject","Date","todaysDate","getFullYear","String","getMonth","padStart","getDate","useTitle","useEffect","Object","keys","length","role","toLowerCase","trim","CONSTANTS","_listCities","handleFormChange","e","target","name","value","listCities","_pageNo","_count","response","data","toast","error","message","info","getMeanReport","status","console","log","createMeanXLSXFile","center","title","className","type","max","onChange","disabled","min","style","fontWeight","options","selectedIndex","text","toLocaleLowerCase","includes","map","city","i","id","REPORT_CONSTANTS","singleEntityQuestions","Text","fontSize","heading","reportColumns","join","onClick"],"sourceRoot":""}