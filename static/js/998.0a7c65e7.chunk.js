"use strict";(self.webpackChunkthis=self.webpackChunkthis||[]).push([[998],{1998:function(e,t,n){n.r(t);var i=n(2982),r=n(1413),a=n(4165),s=n(5861),d=n(885),c=n(2791),o=n(2469),u=n(3360),l=n(3855),m=n(1134),p=n(7689),h=n(9085),f=n(8591),_=n(6536),x=n(2872),g=n(5142),v=n(7263),b=n(6556),j=n(184);t.default=function(){var e=(0,p.s0)(),t=(0,c.useState)(!0),n=(0,d.Z)(t,2),y=n[0],Z=n[1],N=(0,c.useState)(!0),q=(0,d.Z)(N,2),C=q[0],Q=q[1],D=(0,c.useState)([]),S=(0,d.Z)(D,2),w=S[0],I=S[1],E=(0,c.useState)(0),k=(0,d.Z)(E,2),F=k[0],A=k[1],L=(0,c.useState)([{age:"",education_level:""}]),O=(0,d.Z)(L,2),P=O[0],G=O[1],T=(0,_.a)("(min-width: 992px)"),R=(0,m.cI)(),z=R.register,B=R.handleSubmit,W=R.formState.errors,K=R.setValue,H=(0,f.t)(),M=H.getEditPatientId_c,U=H.getEditNavigateTo_c,V=M(),Y=U();(0,_.Z)("Edit Caregiver Demographics"),(0,c.useEffect)((function(){window.scrollTo(0,0),V?J():e(Y.home)}),[]);var J=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var n,i,r,s,d,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(V){t.next=3;break}return h.Am.error("No ID Found"),t.abrupt("return",e("/"));case 3:return Z(!0),t.prev=4,t.next=7,(0,g.s4)({id:V});case 7:if(200===(n=t.sent).status){for(A(parseInt(n.data.patient.demographic[0].children.no_of_children)),i=[],r=n.data.patient.demographic[0].children.children_age.split(","),s=n.data.patient.demographic[0].children.children_education_level.split(","),d=0;d<parseInt(n.data.patient.demographic[0].children.no_of_children);d++)i.push({age:parseInt(r[d]),education_level:s[d]});G(i),K("no_of_children",parseInt(n.data.patient.demographic[0].children.no_of_children)),K("children_age",parseInt(n.data.patient.demographic[0].children.children_age)),b.R.forEach((function(e){"date"!==e.type?K(e.name,n.data.patient.demographic[0][e.name]):K(e.name,n.data.patient.demographic[0][e.name].split("T")[0])})),K("patient_id",parseInt(V)),K("demo_id",parseInt(n.data.patient.demographic[0].demo_section_answer[0].demo_id)),c=n.data.patient.demographic[0].demo_section_answer.map((function(e,t){return{id:e.question.id,answer_text:e.answer_text,question_text:e.question.question_text,is_nullable:e.question.is_nullable,question_urdu_text:e.question.question_urdu_text||"",radio_options:e.question.radio_options,is_radio_type:e.question.is_radio_type,is_date_type:e.question.is_date_type,is_number_type:e.question.is_number_type,is_text_type:e.question.is_text_type}})),I(c),c.forEach((function(e){K("".concat(e.id),e.answer_text)})),Z(!1)}else n.status>=400&&h.Am.error(n.message.message);t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),h.Am.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){var i,s,d,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=parseInt(n.patient_id))&&!isNaN(i)){t.next=4;break}return h.Am.error("Error processing the form, please try again later"),t.abrupt("return");case 4:if((0,x.E6)(P,F)){t.next=7;break}return h.Am.error("Please fill all the fields of children"),t.abrupt("return");case 7:if((s=parseInt(n.demo_id))&&!isNaN(s)){t.next=11;break}return h.Am.error("Error processing the form, please try again later"),t.abrupt("return");case 11:return Z(!0),t.prev=12,d=(0,x.z_)({data:n,children:P,noOfChildren:F,patient_id:i}),t.next=16,(0,g.Wl)((0,r.Z)({demo_id:s,patient_id:i},d));case 16:200===(c=t.sent).status?e(Y.child):c.status>=400&&h.Am.error("Some Error Occured!"),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(12),h.Am.error(t.t0.message);case 23:Z(!1);case 24:case"end":return t.stop()}}),t,null,[[12,20]])})));return function(e){return t.apply(this,arguments)}}();return(0,j.jsxs)(v.xc,{title:"Edit Caregiver Demographics",isLoading:y,children:[C?(0,j.jsxs)(o.Z,{variant:"info",dismissible:!0,onClose:function(){return Q(!1)},children:[(0,j.jsx)(o.Z.Heading,{children:"Caregiver Demographics"}),(0,j.jsx)("hr",{}),(0,j.jsx)("p",{className:"mb-0",children:"This is caregiver's data form. Please only fill caregiver's demographics here."})]}):null,(0,j.jsx)("div",{style:y?{pointerEvents:"none",opacity:.5}:{},children:(0,j.jsxs)(l.Z,{onSubmit:B(X),children:[b.R.map((function(e,t){return(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:e.name,children:[(0,j.jsxs)(l.Z.Label,{className:"row d-flex justify-content-between",children:[(0,j.jsx)("div",{className:"".concat(e.urdu_label.length>0?"col-md-6":"col-12"),children:(0,j.jsxs)("b",{children:["".concat(e.label," : "),e.required?(0,j.jsx)("span",{className:"text-danger",children:"*"}):null]})}),e.urdu_label.length>0?(0,j.jsx)("div",{className:"col-md-6 text-end",children:(0,j.jsxs)("b",{children:[e.required?(0,j.jsx)("span",{className:"text-danger",children:"*"}):null," : ".concat(e.urdu_label)]})}):null]}),(0,j.jsx)("div",{className:"px-10",children:"radio"===e.type?(0,j.jsxs)(l.Z.Select,(0,r.Z)((0,r.Z)({id:"".concat(e.name,"-").concat(t)},z(e.name,{required:e.required})),{},{children:[(0,j.jsx)("option",{value:"",children:"Select"},"0"),e.radio_options.map((function(e,t){return(0,j.jsx)("option",{value:e,children:e},t)}))]}),t):(0,j.jsx)(l.Z.Control,(0,r.Z)({type:e.type,min:0},z(e.name,{required:e.required})))}),W[e.name]&&(0,j.jsx)("span",{className:"text-danger",children:"This field is required"})]},t)})),(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:"no_of_children",children:[(0,j.jsx)(l.Z.Label,{children:(0,j.jsxs)("b",{children:["No of children : ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]})}),(0,j.jsx)("div",{className:"px-10",children:(0,j.jsx)(l.Z.Control,{type:"number",value:F,onChange:function(e){A(Number(e.target.value)),G((0,i.Z)(Array(Number(e.target.value)).keys()).map((function(e,t){return{age:"",education_level:""}})))},min:0,required:!0})})]}),F>0?P.map((function(e,t){return(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-4",children:(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:"age",children:[(0,j.jsx)(l.Z.Label,{children:(0,j.jsx)("b",{children:"Age of child ".concat(t+1,": ")})}),(0,j.jsx)("div",{className:"".concat(T?"px-10":"px-2"),children:(0,j.jsx)(l.Z.Control,{type:"text",onChange:function(e){var n=(0,i.Z)(P);n[t].age=e.target.value,G(n)},value:P[t].age})})]})}),(0,j.jsx)("div",{className:"col-8",children:(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:"education_level",children:[(0,j.jsx)(l.Z.Label,{children:(0,j.jsx)("b",{children:"Education level of child ".concat(t+1," : ")})}),(0,j.jsx)("div",{className:"".concat(T?"px-10":"px-2"),children:(0,j.jsx)(l.Z.Control,{type:"text",onChange:function(e){var n=(0,i.Z)(P);n[t].education_level=e.target.value,G(n)},value:P[t].education_level})})]})})]},t)})):null,w.map((function(e,t){var n;return(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:e.id,children:[(0,j.jsxs)(l.Z.Label,{className:"row d-flex justify-content-between",children:[(0,j.jsx)("div",{className:"".concat(e.question_urdu_text.length>0?"col-md-6":"col-12"),children:(0,j.jsxs)("b",{children:["".concat(e.question_text," : "),e.is_nullable?null:(0,j.jsx)("span",{className:"text-danger",children:"*"})]})}),e.question_urdu_text.length>0?(0,j.jsx)("div",{className:"col-md-6 text-end",children:(0,j.jsxs)("b",{children:[e.is_nullable?null:(0,j.jsx)("span",{className:"text-danger",children:"*"})," : ".concat(e.question_urdu_text)]})}):null]}),(0,j.jsx)("div",{className:"px-10",children:e.is_text_type?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,(0,r.Z)({type:"text"},z(e.id.toString(),{required:!e.is_nullable})))}):e.is_number_type?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,(0,r.Z)({type:"number",min:0},z(e.id.toString(),{required:!e.is_nullable})))}):e.is_date_type?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z.Control,(0,r.Z)({type:"date"},z(e.id.toString(),{required:!e.is_nullable})))}):e.is_radio_type?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(l.Z.Select,(0,r.Z)((0,r.Z)({id:"".concat(e.id,"-").concat(t)},z(e.id.toString(),{required:!e.is_nullable})),{},{children:[(0,j.jsx)("option",{value:"",children:"Select"},"0"),null===(n=e.radio_options)||void 0===n?void 0:n.split(",").map((function(t,n){return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("option",{value:t,children:t},"default-".concat(e.id,"-").concat(n))})}))]}))}):null}),W[e.id.toString()]?(0,j.jsx)("span",{className:"text-danger",children:"This field is required"}):null]},t)})),(0,j.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,j.jsx)(u.Z,{className:"mb-3",variant:"secondary",type:"button",onClick:function(){return e(Y.patient,{state:{id:V}})},children:"Back"}),(0,j.jsx)(u.Z,{className:"mb-3 float-end",variant:"primary",type:"submit",children:"Submit"})]})]})})]})}},6556:function(e,t,n){n.d(t,{R:function(){return i}});var i=[{label:"Name",urdu_label:"\u0646\u0627\u0645",type:"text",name:"name",required:!1},{label:"Gender",urdu_label:"\u0635\u0646\u0641",type:"radio",name:"gender",required:!0,radio_options:["male","female"]},{label:"Age",urdu_label:"\u0639\u0645\u0631",type:"number",name:"age",required:!0},{label:"Date of Birth",urdu_label:"\u0639\u0645\u0631",type:"date",name:"dob",required:!0}]},7263:function(e,t,n){n.d(t,{Uy:function(){return s},xc:function(){return a}});var i=n(4849),r=n(184),a=function(e){var t=e.children,n=e.title,a=e.isLoading,s=e.paddingSmall;return(0,r.jsxs)("div",{className:"my-8 card ",children:[(0,r.jsxs)("h1",{className:"card-header",children:[(0,r.jsx)("div",{className:"card-title m-0",children:(0,r.jsx)("h3",{className:"fw-bolder m-0",children:n})}),a?(0,r.jsxs)("div",{className:"card-subtitle card-title m-0",children:[(0,r.jsx)(i.Z,{as:"span",animation:"grow",size:"md",role:"status","aria-hidden":"true"}),(0,r.jsx)("p",{className:"m-0",children:"Loading ..."})]}):null]}),(0,r.jsx)("div",{className:"card-body ".concat(a?"opacity-50":null),children:(0,r.jsx)("div",{className:"".concat(s?"p-sm-0 px-md-3 px-lg-10":"p-sm-0 px-md-10 px-lg-20"),children:t})})]})},s=function(e){var t=e.children,n=e.styles;return(0,r.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:n,children:(0,r.jsx)("div",{className:"text-center",children:t})})}},2872:function(e,t,n){n.d(t,{E6:function(){return s},PM:function(){return d},Wb:function(){return u},ZI:function(){return o},z_:function(){return c}});var i=n(1413),r=n(885),a=n(6556),s=function(e,t){if(0===t)return!0;if(!e)return!1;if(!Array.isArray(e)||e.length!==t)return!1;for(var n=!0,i=0;i<e.length;i++){var r=e[i];if(0===r.age.length||0===r.education_level.length){n=!1;break}}return n},d=function(e){return l({data:e.data,children:e.children,noOfChildren:e.noOfChildren,patient_id:null})},c=function(e){return l({data:e.data,children:e.children,noOfChildren:e.noOfChildren,patient_id:e.patient_id})},o=function(e){var t=e.data,n=e.patient_id,i=a.R.map((function(e){return e.name})).reduce((function(e,n){return e[n]=t[n],e}),{});return{dynamicQuestions:{dynamicKeys:Object.keys(t).map((function(e){return Number(e)})),dynamicData:t},preDefinedQuestions:i,patient_id:n}},u=function(e){for(var t=e.patient_id,n=e.data,i=[],a=0,s=Object.entries(n);a<s.length;a++){var d=(0,r.Z)(s[a],2),c=d[0],o=d[1];if(o){var u=null===c||void 0===c?void 0:c.split("-"),l=(0,r.Z)(u,3),m=l[0],p=l[1],h=l[2],f=null===o||void 0===o?void 0:o.split("-"),_=(0,r.Z)(f,3),x=_[0],g=_[1],v=_[2];i.push({patient_id:parseInt(m),section_id:parseInt(p),section_question_id:parseInt(h),section_option_id:parseInt(x),answer_text:v,is_answer_in_urdu:Boolean(Number(g))})}}return{patient_id:t,data:i}};function l(e){var t=e.data,n=e.children,r=e.noOfChildren,s=e.patient_id,d=a.R.map((function(e){return e.name})).reduce((function(e,n){return e[n]=t[n],e}),{});d.no_of_children=r,n.forEach((function(e){var t,n;d.children_age=d.children_age?d.children_age+","+e.age.toString():e.age.toString(),d.children_education_level=d.children_education_level?d.children_education_level+","+(null===(t=e.education_level)||void 0===t?void 0:t.replace(","," ").toString()):null===(n=e.education_level)||void 0===n?void 0:n.replace(","," ").toString()}));var c={dynamicQuestions:{dynamicKeys:Object.keys(t).map((function(e){return Number(e)})),dynamicData:t},preDefinedQuestions:d};return s?(0,i.Z)((0,i.Z)({},c),{},{patient_id:s}):c}},5142:function(e,t,n){n.d(t,{s4:function(){return m},xi:function(){return h},sT:function(){return o},vZ:function(){return u},Wl:function(){return p},LO:function(){return f},YS:function(){return l}});var i=n(3144),r=n(5671),a=n(7976),s=(0,i.Z)((function e(){(0,r.Z)(this,e)}));s.getLatestFilledForms=function(e){var t=e._pageNo,n=e._count,i="/api/form/list-latest-filled-forms?_pageNo=".concat(t,"&_count=").concat(n);return a.Z.get(i)},s.getPatientEditForm=function(e){var t=e.id,n="/api/form/get-demo-edit-form?id=".concat(t,"&type=patient");return a.Z.get(n)},s.updatePatientDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,i=e.demo_id,r=e.patient_id;return a.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:i,patient_id:r,type:"patient"})},s.getCaregiverEditForm=function(e){var t=e.id,n="/api/form/get-demo-edit-form?id=".concat(t,"&type=caregiver");return a.Z.get(n)},s.updateCaregiverDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,i=e.demo_id,r=e.patient_id;return a.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:i,patient_id:r,type:"caregiver"})},s.getChildEditForm=function(e){var t=e.id,n="/api/form/get-demo-edit-form?id=".concat(t,"&type=child");return a.Z.get(n)},s.updateChildDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,i=e.demo_id,r=e.patient_id;return a.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:i,patient_id:r,type:"child"})};var d=s,c=n(3984),o=function(e){return d.getLatestFilledForms(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,c.Z)(e)}))},u=function(e){return d.getPatientEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,c.Z)(e)}))},l=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,i=e.demo_id,r=e.patient_id;return d.updatePatientDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:i,patient_id:r}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,c.Z)(e)}))},m=function(e){return d.getCaregiverEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,c.Z)(e)}))},p=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,i=e.demo_id,r=e.patient_id;return d.updateCaregiverDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:i,patient_id:r}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,c.Z)(e)}))},h=function(e){return d.getChildEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,c.Z)(e)}))},f=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,i=e.demo_id,r=e.patient_id;return d.updateChildDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:i,patient_id:r}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,c.Z)(e)}))}}}]);
//# sourceMappingURL=998.0a7c65e7.chunk.js.map