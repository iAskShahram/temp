"use strict";(self.webpackChunkthis=self.webpackChunkthis||[]).push([[32],{3032:function(e,s,l){l.r(s);var a=l(4165),r=l(5861),o=l(4942),c=l(1413),n=l(885),t=l(2791),i=l(3073),d=l(9492),m=l(7689),u=l(1885),f=l.n(u),p=l(9085),v=l(6536),h=l(8898),g=l(6725),x=l(184);s.default=function(){var e=(0,t.useRef)(new(f())),s=(0,m.s0)(),l=(0,m.TH)().state,u=(0,h.G)().getUserProfile_c,N=(0,t.useState)(u()),b=(0,t.useRef)(null),j=(0,t.useState)([]),w=(0,n.Z)(j,2),y=w[0],_=w[1],C=(0,t.useState)("password"),Z=(0,n.Z)(C,2),k=Z[0],S=Z[1],q=(0,t.useState)({name:"",cnic:"",dob:"",email:"",phone:"",gender:"",role:"",password:""}),A=(0,n.Z)(q,2),R=A[0],E=A[1];function T(s){var l=s.target,a=l.name,r=l.value;e.current.showMessageFor(a),E((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,o.Z)({},a,r))}))}function U(){return(U=(0,r.Z)((0,a.Z)().mark((function e(){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.et)(Number(b.current));case 2:200===(s=e.sent).status?E((0,c.Z)((0,c.Z)({},s.data),{},{password:""})):p.Am.error("Unable to fetch User Data");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=(0,r.Z)((0,a.Z)().mark((function e(){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.ze)({_pageNo:1,_count:1e3});case 2:200===(s=e.sent).status?_(s.data.cities):s.status>=400&&p.Am.warn("failed to get cities");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=(0,r.Z)((0,a.Z)().mark((function e(){var l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Nq)(R,parseInt(R.id));case 2:200===(l=e.sent).status?(p.Am.success("User updated"),s("/list-users")):l.status>=400&&p.Am.warn(l.message.message);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(s){s.preventDefault(),e.current.allValid()?function(){I.apply(this,arguments)}():e.current.showMessages()}return(0,t.useEffect)((function(){var e;null!==l&&void 0!==l&&l.id&&Object.keys(N).length&&(null===(e=N.role)||void 0===e?void 0:e.toLowerCase().trim())!==g.t.USER?(b.current=l.id,function(){U.apply(this,arguments)}(),function(){D.apply(this,arguments)}()):s("/")}),[]),(0,v.Z)("Update User"),(0,x.jsxs)("div",{className:"my-8 card",children:[(0,x.jsx)("div",{className:"card-header border-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_account_profile_details","aria-expanded":"true","aria-controls":"kt_account_profile_details",children:(0,x.jsx)("div",{className:"card-title m-0",children:(0,x.jsx)("h3",{className:"fw-bolder m-0",children:"Update User"})})}),(0,x.jsxs)("form",{id:"kt_account_profile_details",className:"collapse show",onSubmit:function(e){return L(e)},children:[(0,x.jsx)("div",{id:"kt_account_profile_details_form",className:"form fv-plugins-bootstrap5 fv-plugins-framework",noValidate:"novalidate"}),(0,x.jsxs)("div",{className:"card-body border-top p-9",children:[(0,x.jsx)("div",{className:"row mb-6"}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Name"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:R.name,type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Name"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"CNIC"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:R.cnic,type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"CNIC"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Date of Birth"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:R.dob.split("T")[0],type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Date of birth"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Gender"}),(0,x.jsx)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:(0,x.jsxs)("select",{disabled:!0,id:"gender",name:"gender",value:R.gender,className:"form-control form-control-lg form-control-solid",children:[(0,x.jsx)("option",{value:"",children:"Select"}),(0,x.jsx)("option",{value:"male",children:"male"}),(0,x.jsx)("option",{value:"female",children:"female"})]})})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"City"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsxs)("select",{id:"city",name:"city_id",value:R.city_id,className:"form-control form-control-lg form-control-solid",onChange:T,children:[(0,x.jsx)("option",{value:"",children:"Select"}),y.map((function(e,s){return(0,x.jsx)("option",{value:e.id,children:e.name},s)}))]}),e.current.message("city",R.city_id,"required",{messgae:"City is required",className:"text-danger"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Phone"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{onChange:T,value:R.phone,type:"text",name:"phone",className:"form-control form-control-lg form-control-solid",placeholder:"Contact Number"}),e.current.message("phone",R.phone,"required|numeric|min:11",{messgae:"Phone is required",className:"text-danger"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Email"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:R.email,type:"text",name:"email",className:"form-control form-control-lg form-control-solid",placeholder:"Email"}),e.current.message("email",R.email,"required|email",{messgae:"email is required",className:"text-danger"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Password"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("input",{id:"password",className:"form-control form-control-lg form-control-solid",type:k,name:"password",onChange:T,value:R.password,placeholder:"password"}),(0,x.jsx)("span",{className:"input-group-text border-0",onClick:function(){return S("password"===k?"text":"password")},style:{cursor:"pointer"},children:"password"===k?(0,x.jsx)("i",{className:"far fa-eye-slash"}):(0,x.jsx)("i",{className:"far fa-eye"})})]}),e.current.message("password",R.password,"min:8",{messgae:"password is required",className:"text-danger"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Role"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsxs)("select",{id:"role",name:"role",value:R.role,onChange:T,className:"form-control form-control-lg form-control-solid",children:[(0,x.jsx)("option",{value:"",children:"Select"}),(0,x.jsx)("option",{value:"admin",children:g.t.RESEARCH_ASSISTANT},"1"),(0,x.jsx)("option",{value:"user",children:g.t.DATA_COLLECTOR},"2")]}),e.current.message("role",R.role,"required",{messgae:"Role is required",className:"text-danger"})]})]})]}),(0,x.jsxs)("div",{className:"card-footer d-flex justify-content-end py-6 px-9",children:[(0,x.jsx)("button",{type:"button",onClick:function(e){return s("/list-users")},className:"btn btn-light btn-active-light-primary me-2",children:"Discard"}),(0,x.jsx)("button",{type:"submit",className:"btn btn-primary",id:"kt_account_profile_details_submit",children:"Submit"})]})]})]})]})}},6725:function(e,s,l){l.d(s,{t:function(){return a}});var a={ADMIN:"admin",USER:"user",RESEARCH_ASSISTANT:"Principal Investigator",DATA_COLLECTOR:"Data Collector"}},9492:function(e,s,l){l.d(s,{gC:function(){return m},Se:function(){return u},ze:function(){return d}});var a=l(1413),r=l(3144),o=l(5671),c=l(7976),n=(0,r.Z)((function e(){(0,o.Z)(this,e)}));n.listCities=function(e){var s="/api/city/list-cities?_pageNo=".concat(null===e||void 0===e?void 0:e._pageNo,"&_count=").concat(null===e||void 0===e?void 0:e._count);return c.Z.get(s)},n.createCity=function(e){return c.Z.post("api/city",(0,a.Z)({},e))},n.deleteCity=function(e){var s=e.id,l="api/city/".concat(s);return c.Z.delete(l)};var t=n,i=l(3984),d=function(e){return t.listCities(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,i.Z)(e)}))},m=function(e){return t.createCity(e).then((function(e){return{status:e.status,data:e.data,message:"Request Success"}})).catch((function(e){return(0,i.Z)(e)}))},u=function(e){var s=e.id;return t.deleteCity({id:s}).then((function(e){return{status:e.status,data:e.data,message:"Request Success"}})).catch((function(e){return(0,i.Z)(e)}))}}}]);
//# sourceMappingURL=32.2d7fa954.chunk.js.map