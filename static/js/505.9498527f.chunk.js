"use strict";(self.webpackChunkthis=self.webpackChunkthis||[]).push([[505],{5505:function(e,t,n){n.r(t);var a=n(4165),i=n(1413),r=n(5861),s=n(885),c=n(2791),d=n(2469),o=n(3360),u=n(9140),l=n(2677),m=n(3855),f=n(9743),p=n(1134),h=n(7689),v=n(9085),g=n(8591),_=n(6536),x=n(2872),Z=n(5142),y=n(7263),b=n(184);t.default=function(){var e=(0,h.s0)(),t=(0,g.t)(),n=t.getEditPatientId_c,j=t.getEditNavigateTo_c,N=n(),C=j(),Q=(0,c.useState)(!1),S=(0,s.Z)(Q,2),w=S[0],E=S[1],D=(0,c.useState)(!0),P=(0,s.Z)(D,2),F=P[0],k=P[1],q=(0,c.useState)([{heading:"",description:"",options:[],section_questions:[]}]),I=(0,s.Z)(q,2),T=I[0],O=I[1],R=(0,p.cI)(),A=R.register,L=R.handleSubmit,B=R.formState.errors,H=R.setValue;function z(){return(z=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,(0,Z.yw)({id:N});case 3:200===(t=e.sent).status?(n=/^[\u0600-\u06FF]/,t.data.section.forEach((function(e){e.section_answers.forEach((function(e){H("".concat(N,"-").concat(e.section_id,"-").concat(e.section_question_id),"".concat(e.section_option_id,"-").concat(parseInt(n.test(e.answer_text)?1:0),"-").concat(e.answer_text))}))})),O(t.data.section),E(!1)):t.status>=400&&v.Am.error(t.message.message);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=(0,r.Z)((0,a.Z)().mark((function t(n){var i,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),i=(0,x.Wb)({patient_id:N,data:n}),t.next=4,(0,Z.o9)({patient_id:N,scales:i.data});case 4:200===(r=t.sent).status?(v.Am.success(r.message.message),e(C.home)):r.status>=400&&v.Am.error(r.message.message),E(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,_.Z)("Edit Child Diagnostic Tools"),(0,c.useEffect)((function(){window.scrollTo(0,0),N?function(){z.apply(this,arguments)}():e(C.home)}),[]),(0,b.jsxs)(y.xc,{title:"Edit Child Diagnostic Tools",isLoading:w,paddingSmall:!0,children:[F?(0,b.jsxs)(d.Z,{variant:"info",dismissible:!0,onClose:function(){return k(!1)},children:[(0,b.jsx)(d.Z.Heading,{children:"Child Diagnostic Tools"}),(0,b.jsx)("hr",{}),(0,b.jsx)("p",{className:"mb-0",children:"This is Child's Diagnostic Tools data form. Please only fill Child's details here."})]}):null,(0,b.jsx)("div",{style:w?{pointerEvents:"none",opacity:.5}:{},children:(0,b.jsxs)(m.Z,{onSubmit:L((function(e){return G.apply(this,arguments)})),className:"mt-10",children:[T.map((function(e,t){var n,a;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(u.Z,{className:"mb-3 border border-3 p-3",children:[(0,b.jsx)("div",{className:"d-flex justify-content-center",children:(0,b.jsx)(u.Z.Title,{children:e.heading})}),(0,b.jsx)("div",{className:"mb-2 text-muted",children:null===(n=e.description)||void 0===n||null===(a=n.split(","))||void 0===a?void 0:a.map((function(t,n){return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"px-auto",children:e.is_description_in_urdu?(0,b.jsx)("div",{className:"d-flex justify-content-end",children:(0,b.jsx)("p",{className:"",children:t},n)}):(0,b.jsx)("p",{className:"",children:t},n)},n)})}))}),(0,b.jsxs)(u.Z.Body,{className:"p-0",children:[(0,b.jsxs)(f.Z,{className:"text-bold",children:[(0,b.jsx)(l.Z,{className:"col-1",children:"No."}),(0,b.jsx)(l.Z,{className:"col-4",children:"Questions"}),(0,b.jsx)(l.Z,{className:"m-0 p-0",children:(0,b.jsx)(f.Z,{className:"m-0 p-0",children:e.options.map((function(e,t){return(0,b.jsx)(l.Z,{className:"small p-0 m-0",children:e.option_text},t)}))})})]}),e.section_questions.map((function(t,n){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(f.Z,{className:"mt-5",children:[(0,b.jsx)(l.Z,{className:"col-1",children:n+1}),(0,b.jsx)(l.Z,{className:"col-4",children:t.is_question_in_urdu?(0,b.jsx)("div",{className:"d-flex justify-content-end",children:t.question_text}):t.question_text}),(0,b.jsx)(l.Z,{className:"m-0 p-0",children:(0,b.jsx)(f.Z,{className:"m-0 p-0",children:e.options.map((function(n,a){return(0,b.jsx)(l.Z,{className:"small p-0 m-0",children:(0,b.jsx)(m.Z.Check,(0,i.Z)((0,i.Z)({type:"radio"},A("".concat(N,"-").concat(e.id,"-").concat(t.id),{required:!t.is_nullable})),{},{value:"".concat(n.id,"-").concat(Number(n.is_option_in_urdu),"-").concat(n.option_text)}))},a)}))})})]},n),B["".concat(N,"-").concat(e.id,"-").concat(t.id)]&&(0,b.jsx)("span",{className:"text-danger ps-20",children:"This field is required"})]})}))]})]},t)})})),(0,b.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,b.jsx)(o.Z,{className:"mb-3",variant:"secondary",type:"button",onClick:function(){return e(C.caregiverScale,{state:{id:N}})},children:"Back"}),(0,b.jsx)(o.Z,{className:"mb-3 float-end",variant:"primary",type:"submit",children:"Submit"})]})]})})]})}},6556:function(e,t,n){n.d(t,{R:function(){return a}});var a=[{label:"Name",urdu_label:"\u0646\u0627\u0645",type:"text",name:"name",required:!1},{label:"Gender",urdu_label:"\u0635\u0646\u0641",type:"radio",name:"gender",required:!0,radio_options:["male","female"]},{label:"Age",urdu_label:"\u0639\u0645\u0631",type:"number",name:"age",required:!0},{label:"Date of Birth",urdu_label:"\u0639\u0645\u0631",type:"date",name:"dob",required:!0}]},7263:function(e,t,n){n.d(t,{Uy:function(){return d},xc:function(){return c}});var a=n(4849),i=n(3360),r=n(7689),s=n(184),c=function(e){var t=e.children,n=e.title,c=e.isLoading,d=e.paddingSmall,o=e.resetCookieAndLocalStorage,u=(0,r.s0)();return(0,s.jsxs)("div",{className:"my-8 card ",children:[(0,s.jsxs)("h1",{className:"card-header",children:[(0,s.jsx)("div",{className:"card-title m-0",children:(0,s.jsx)("h3",{className:"fw-bolder m-0",children:n})}),c?(0,s.jsxs)("div",{className:"card-subtitle card-title m-0",children:[(0,s.jsx)(a.Z,{as:"span",animation:"grow",size:"md",role:"status","aria-hidden":"true"}),(0,s.jsx)("p",{className:"m-0",children:"Loading ..."})]}):null,o&&(0,s.jsx)("div",{className:"card-subtitle card-title m-0",children:(0,s.jsx)(i.Z,{variant:"outline-danger",className:"m-0",onClick:function(){window.confirm("Are you sure you want to clear cache?")&&(o(),u("/"))},children:"Clear Form Cache"})})]}),(0,s.jsx)("div",{className:"card-body ".concat(c?"opacity-50":null),style:c?{pointerEvents:"none"}:{},children:(0,s.jsx)("div",{className:"".concat(d?"p-sm-0 px-md-3 px-lg-10":"p-sm-0 px-md-10 px-lg-20"),children:t})})]})},d=function(e){var t=e.children,n=e.styles;return(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:n,children:(0,s.jsx)("div",{className:"text-center",children:t})})}},2872:function(e,t,n){n.d(t,{E6:function(){return s},PM:function(){return c},Wb:function(){return u},ZI:function(){return o},z_:function(){return d}});var a=n(1413),i=n(885),r=n(6556),s=function(e,t){if(0===t)return!0;if(!e)return!1;if(!Array.isArray(e)||e.length!==t)return!1;for(var n=!0,a=0;a<e.length;a++){var i=e[a];if(0===i.age.length||0===i.education_level.length){n=!1;break}}return n},c=function(e){return l({data:e.data,children:e.children,noOfChildren:e.noOfChildren,patient_id:null})},d=function(e){return l({data:e.data,children:e.children,noOfChildren:e.noOfChildren,patient_id:e.patient_id})},o=function(e){var t=e.data,n=e.patient_id,a=r.R.map((function(e){return e.name})).reduce((function(e,n){return e[n]=t[n],e}),{});return{dynamicQuestions:{dynamicKeys:Object.keys(t).map((function(e){return Number(e)})),dynamicData:t},preDefinedQuestions:a,patient_id:n}},u=function(e){for(var t=e.patient_id,n=e.data,a=[],r=0,s=Object.entries(n);r<s.length;r++){var c=(0,i.Z)(s[r],2),d=c[0],o=c[1];if(o){var u=null===d||void 0===d?void 0:d.split("-"),l=(0,i.Z)(u,3),m=l[0],f=l[1],p=l[2],h=null===o||void 0===o?void 0:o.split("-"),v=(0,i.Z)(h,3),g=v[0],_=v[1],x=v[2];a.push({patient_id:parseInt(m),section_id:parseInt(f),section_question_id:parseInt(p),section_option_id:parseInt(g),answer_text:x,is_answer_in_urdu:Boolean(Number(_))})}}return{patient_id:t,data:a}};function l(e){var t=e.data,n=e.children,i=e.noOfChildren,s=e.patient_id,c=r.R.map((function(e){return e.name})).reduce((function(e,n){return e[n]=t[n],e}),{});c.no_of_children=i,n.forEach((function(e){var t,n;c.children_age=c.children_age?c.children_age+","+e.age.toString():e.age.toString(),c.children_education_level=c.children_education_level?c.children_education_level+","+(null===(t=e.education_level)||void 0===t?void 0:t.replace(","," ").toString()):null===(n=e.education_level)||void 0===n?void 0:n.replace(","," ").toString()}));var d={dynamicQuestions:{dynamicKeys:Object.keys(t).map((function(e){return Number(e)})),dynamicData:t},preDefinedQuestions:c};return s?(0,a.Z)((0,a.Z)({},d),{},{patient_id:s}):d}},5142:function(e,t,n){n.d(t,{dI:function(){return N},s4:function(){return p},xi:function(){return v},QI:function(){return Z},yw:function(){return b},c3:function(){return _},sT:function(){return l},vZ:function(){return m},Wl:function(){return h},zS:function(){return y},LO:function(){return g},o9:function(){return j},YS:function(){return f},HR:function(){return x}});var a=n(4165),i=n(5861),r=n(3144),s=n(5671),c=n(7976),d=(0,r.Z)((function e(){(0,s.Z)(this,e)}));d.getLatestFilledForms=function(e){var t=e._pageNo,n=e._count,a="/api/form/list-latest-filled-forms?_pageNo=".concat(t,"&_count=").concat(n);return c.Z.get(a)},d.getPatientEditForm=function(e){var t=e.id,n="/api/form/get-edit-demo?id=".concat(t,"&type=patient");return c.Z.get(n)},d.updatePatientDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return c.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i,type:"patient"})},d.getCaregiverEditForm=function(e){var t=e.id,n="/api/form/get-edit-demo?id=".concat(t,"&type=caregiver");return c.Z.get(n)},d.updateCaregiverDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return c.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i,type:"caregiver"})},d.getChildEditForm=function(e){var t=e.id,n="/api/form/get-edit-demo?id=".concat(t,"&type=child");return c.Z.get(n)},d.updateChildDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return c.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i,type:"child"})},d.getEditPatientScales=function(e){var t=e.id,n="/api/form/get-edit-scale?id=".concat(t,"&type=patient");return c.Z.get(n)},d.updatePatientScales=function(e){var t=e.patient_id,n=e.scales;return c.Z.post("/api/form/update-edit-scale",{patient_id:t,scales:n,type:"patient"})},d.getEditCaregiverScales=function(e){var t=e.id,n="/api/form/get-edit-scale?id=".concat(t,"&type=caregiver");return c.Z.get(n)},d.updateCaregiverScales=function(e){var t=e.patient_id,n=e.scales;return c.Z.post("/api/form/update-edit-scale",{patient_id:t,scales:n,type:"caregiver"})},d.getEditChildScales=function(e){var t=e.id,n="/api/form/get-edit-scale?id=".concat(t,"&type=child");return c.Z.get(n)},d.updateChildScales=function(e){var t=e.patient_id,n=e.scales;return c.Z.post("/api/form/update-edit-scale",{patient_id:t,scales:n,type:"child"})},d.deleteForm=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,i="/api/form/delete-form?id=".concat(n),e.abrupt("return",c.Z.delete(i));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var o=d,u=n(3984),l=function(e){return o.getLatestFilledForms(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},m=function(e){return o.getPatientEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},f=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return o.updatePatientDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},p=function(e){return o.getCaregiverEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},h=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return o.updateCaregiverDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},v=function(e){return o.getChildEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},g=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return o.updateChildDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},_=function(e){var t=e.id;return o.getEditPatientScales({id:t}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},x=function(e){var t=e.patient_id,n=e.scales;return o.updatePatientScales({patient_id:t,scales:n}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},Z=function(e){var t=e.id;return o.getEditCaregiverScales({id:t}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return console.log(e),(0,u.Z)(e)}))},y=function(e){var t=e.patient_id,n=e.scales;return o.updateCaregiverScales({patient_id:t,scales:n}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},b=function(e){var t=e.id;return o.getEditChildScales({id:t}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},j=function(e){var t=e.patient_id,n=e.scales;return o.updateChildScales({patient_id:t,scales:n}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))},N=function(e){var t=e.id;return o.deleteForm({id:t}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,u.Z)(e)}))}},9140:function(e,t,n){n.d(t,{Z:function(){return D}});var a=n(1413),i=n(5987),r=n(1694),s=n.n(r),c=n(2791),d=n(162),o=n(6543),u=n(3689),l=n(184),m=["bsPrefix","className","variant","as"],f=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.variant,o=e.as,u=void 0===o?"img":o,f=(0,i.Z)(e,m),p=(0,d.vE)(n,"card-img");return(0,l.jsx)(u,(0,a.Z)({ref:t,className:s()(c?"".concat(p,"-").concat(c):p,r)},f))}));f.displayName="CardImg";var p=f,h=n(6040),v=["bsPrefix","className","as"],g=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.as,u=void 0===o?"div":o,m=(0,i.Z)(e,v),f=(0,d.vE)(n,"card-header"),p=(0,c.useMemo)((function(){return{cardHeaderBsPrefix:f}}),[f]);return(0,l.jsx)(h.Z.Provider,{value:p,children:(0,l.jsx)(u,(0,a.Z)((0,a.Z)({ref:t},m),{},{className:s()(r,f)}))})}));g.displayName="CardHeader";var _=g,x=["bsPrefix","className","bg","text","border","body","children","as"],Z=(0,u.Z)("h5"),y=(0,u.Z)("h6"),b=(0,o.Z)("card-body"),j=(0,o.Z)("card-title",{Component:Z}),N=(0,o.Z)("card-subtitle",{Component:y}),C=(0,o.Z)("card-link",{Component:"a"}),Q=(0,o.Z)("card-text",{Component:"p"}),S=(0,o.Z)("card-footer"),w=(0,o.Z)("card-img-overlay"),E=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.bg,o=e.text,u=e.border,m=e.body,f=e.children,p=e.as,h=void 0===p?"div":p,v=(0,i.Z)(e,x),g=(0,d.vE)(n,"card");return(0,l.jsx)(h,(0,a.Z)((0,a.Z)({ref:t},v),{},{className:s()(r,g,c&&"bg-".concat(c),o&&"text-".concat(o),u&&"border-".concat(u)),children:m?(0,l.jsx)(b,{children:f}):f}))}));E.displayName="Card",E.defaultProps={body:!1};var D=Object.assign(E,{Img:p,Title:j,Subtitle:N,Body:b,Link:C,Text:Q,Header:_,Footer:S,ImgOverlay:w})},6040:function(e,t,n){var a=n(2791).createContext(null);a.displayName="CardHeaderContext",t.Z=a},9743:function(e,t,n){var a=n(1413),i=n(5987),r=n(1694),s=n.n(r),c=n(2791),d=n(162),o=n(184),u=["bsPrefix","className","as"],l=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.as,l=void 0===c?"div":c,m=(0,i.Z)(e,u),f=(0,d.vE)(n,"row"),p=(0,d.pi)(),h=(0,d.zG)(),v="".concat(f,"-cols"),g=[];return p.forEach((function(e){var t,n=m[e];delete m[e],t=null!=n&&"object"===typeof n?n.cols:n;var a=e!==h?"-".concat(e):"";null!=t&&g.push("".concat(v).concat(a,"-").concat(t))})),(0,o.jsx)(l,(0,a.Z)((0,a.Z)({ref:t},m),{},{className:s().apply(void 0,[r,f].concat(g))}))}));l.displayName="Row",t.Z=l}}]);
//# sourceMappingURL=505.9498527f.chunk.js.map