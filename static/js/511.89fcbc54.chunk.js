"use strict";(self.webpackChunkthis=self.webpackChunkthis||[]).push([[511],{6511:function(e,t,n){n.r(t);var a=n(4165),i=n(1413),r=n(5861),s=n(885),c=n(2791),d=n(2469),o=n(3360),u=n(9140),l=n(2677),m=n(3855),f=n(9743),p=n(1134),h=n(7689),v=n(9085),g=n(8591),_=n(6536),x=n(2872),Z=n(5142),y=n(7263),N=n(184);t.default=function(){var e=(0,h.s0)(),t=(0,g.t)(),n=t.getEditPatientId_c,j=t.getEditNavigateTo_c,b=n(),C=j(),S=(0,c.useState)(!1),Q=(0,s.Z)(S,2),E=Q[0],w=Q[1],D=(0,c.useState)(!0),P=(0,s.Z)(D,2),F=P[0],k=P[1],q=(0,c.useState)([{heading:"",description:"",options:[],section_questions:[]}]),I=(0,s.Z)(q,2),T=I[0],O=I[1],L=(0,p.cI)(),R=L.register,A=L.handleSubmit,B=L.formState.errors,H=L.setValue;function z(){return(z=(0,r.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,(0,Z.QI)({id:b});case 3:t=e.sent,console.log(t),200===t.status?(n=/^[\u0600-\u06FF]/,t.data.section.forEach((function(e){e.section_answers.forEach((function(e){H("".concat(b,"-").concat(e.section_id,"-").concat(e.section_question_id),"".concat(e.section_option_id,"-").concat(parseInt(n.test(e.answer_text)?1:0),"-").concat(e.answer_text))}))})),O(t.data.section),w(!1)):t.status>=400&&v.Am.error(t.message.message);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=(0,r.Z)((0,a.Z)().mark((function t(n){var i,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(!0),i=(0,x.Wb)({patient_id:b,data:n}),t.next=4,(0,Z.zS)({patient_id:b,scales:i.data});case 4:200===(r=t.sent).status?(v.Am.success(r.message.message),e(C.childScale)):r.status>=400&&v.Am.error(r.message.message),w(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,_.Z)("Edit Caregiver Diagnostic Tools"),(0,c.useEffect)((function(){window.scrollTo(0,0),b?function(){z.apply(this,arguments)}():e(C.home)}),[]),(0,N.jsxs)(y.xc,{title:"Edit Caregiver Diagnostic Tools",isLoading:E,paddingSmall:!0,children:[F?(0,N.jsxs)(d.Z,{variant:"info",dismissible:!0,onClose:function(){return k(!1)},children:[(0,N.jsx)(d.Z.Heading,{children:"Caregiver Diagnostic Tools"}),(0,N.jsx)("hr",{}),(0,N.jsx)("p",{className:"mb-0",children:"This is Caregiver's Diagnostic Tools data form. Please only fill Caregiver's details here."})]}):null,(0,N.jsx)("div",{style:E?{pointerEvents:"none",opacity:.5}:{},children:(0,N.jsxs)(m.Z,{onSubmit:A((function(e){return G.apply(this,arguments)})),className:"mt-10",children:[T.map((function(e,t){var n,a;return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(u.Z,{className:"mb-3 border border-3 p-3",children:[(0,N.jsx)("div",{className:"d-flex justify-content-center",children:(0,N.jsx)(u.Z.Title,{children:e.heading})}),(0,N.jsx)("div",{className:"mb-2 text-muted",children:null===(n=e.description)||void 0===n||null===(a=n.split(","))||void 0===a?void 0:a.map((function(t,n){return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{className:"px-auto",children:e.is_description_in_urdu?(0,N.jsx)("div",{className:"d-flex justify-content-end",children:(0,N.jsx)("p",{className:"",children:t},n)}):(0,N.jsx)("p",{className:"",children:t},n)},n)})}))}),(0,N.jsxs)(u.Z.Body,{className:"p-0",children:[(0,N.jsxs)(f.Z,{className:"text-bold",children:[(0,N.jsx)(l.Z,{className:"col-1",children:"No."}),(0,N.jsx)(l.Z,{className:"col-4",children:"Questions"}),(0,N.jsx)(l.Z,{className:"m-0 p-0",children:(0,N.jsx)(f.Z,{className:"m-0 p-0",children:e.options.map((function(e,t){return(0,N.jsx)(l.Z,{className:"small p-0 m-0",children:e.option_text},t)}))})})]}),e.section_questions.map((function(t,n){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(f.Z,{className:"mt-5",children:[(0,N.jsx)(l.Z,{className:"col-1",children:t.question_number||n+1}),(0,N.jsx)(l.Z,{className:"col-4",children:t.is_question_in_urdu?(0,N.jsxs)("div",{className:"d-flex justify-content-end",children:[" ",e.heading.toLowerCase()==="Stigma Scale".toLowerCase()?"f ":""," ",t.question_text]}):t.question_text}),(0,N.jsx)(l.Z,{className:"m-0 p-0",children:(0,N.jsx)(f.Z,{className:"m-0 p-0",children:e.options.map((function(n,a){return(0,N.jsx)(l.Z,{className:"small p-0 m-0",children:(0,N.jsx)(m.Z.Check,(0,i.Z)((0,i.Z)({type:"radio"},R("".concat(b,"-").concat(e.id,"-").concat(t.id),{required:!t.is_nullable})),{},{value:"".concat(n.id,"-").concat(Number(n.is_option_in_urdu),"-").concat(n.option_text)}))},a)}))})})]},n),B["".concat(b,"-").concat(e.id,"-").concat(t.id)]&&(0,N.jsx)("span",{className:"text-danger ps-20",children:"This field is required"})]})}))]})]},t)})})),(0,N.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,N.jsx)(o.Z,{className:"mb-3",variant:"secondary",type:"button",onClick:function(){return e(C.patientScale,{state:{id:b}})},children:"Back"}),(0,N.jsx)(o.Z,{className:"mb-3 float-end",variant:"primary",type:"submit",children:"Next"})]})]})})]})}},6556:function(e,t,n){n.d(t,{R:function(){return a}});var a=[{label:"Name",urdu_label:"\u0646\u0627\u0645",type:"text",name:"name",required:!1},{label:"Gender",urdu_label:"\u0635\u0646\u0641",type:"radio",name:"gender",required:!0,radio_options:["male","female"]},{label:"Age",urdu_label:"\u0639\u0645\u0631",type:"number",name:"age",required:!0},{label:"Date of Birth",urdu_label:"\u0639\u0645\u0631",type:"date",name:"dob",required:!0}]},7263:function(e,t,n){n.d(t,{Uy:function(){return d},xc:function(){return c}});var a=n(4849),i=n(3360),r=n(7689),s=n(184),c=function(e){var t=e.children,n=e.title,c=e.isLoading,d=e.paddingSmall,o=e.resetCookieAndLocalStorage,u=(0,r.s0)();return(0,s.jsxs)("div",{className:"my-8 card ",children:[(0,s.jsxs)("h1",{className:"card-header",children:[(0,s.jsx)("div",{className:"card-title m-0",children:(0,s.jsx)("h3",{className:"fw-bolder m-0",children:n})}),c?(0,s.jsxs)("div",{className:"card-subtitle card-title m-0",children:[(0,s.jsx)(a.Z,{as:"span",animation:"grow",size:"md",role:"status","aria-hidden":"true"}),(0,s.jsx)("p",{className:"m-0",children:"Loading ..."})]}):null,o&&(0,s.jsx)("div",{className:"card-subtitle card-title m-0",children:(0,s.jsx)(i.Z,{variant:"outline-danger",className:"m-0",onClick:function(){window.confirm("Are you sure you want to clear cache?")&&(o(),u("/"))},children:"Clear Form Cache"})})]}),(0,s.jsx)("div",{className:"card-body ".concat(c?"opacity-50":null),style:c?{pointerEvents:"none"}:{},children:(0,s.jsx)("div",{className:"".concat(d?"p-sm-0 px-md-3 px-lg-10":"p-sm-0 px-md-10 px-lg-20"),children:t})})]})},d=function(e){var t=e.children,n=e.styles;return(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center",style:n,children:(0,s.jsx)("div",{className:"text-center",children:t})})}},2872:function(e,t,n){n.d(t,{E6:function(){return s},PM:function(){return c},Wb:function(){return u},ZI:function(){return o},z_:function(){return d}});var a=n(1413),i=n(885),r=n(6556),s=function(e,t){if(0===t)return!0;if(!e)return!1;if(!Array.isArray(e)||e.length!==t)return!1;for(var n=!0,a=0;a<e.length;a++){var i=e[a];if(0===i.age.length||0===i.education_level.length){n=!1;break}}return n},c=function(e){return l({data:e.data,children:e.children,noOfChildren:e.noOfChildren,patient_id:null})},d=function(e){return l({data:e.data,children:e.children,noOfChildren:e.noOfChildren,patient_id:e.patient_id})},o=function(e){var t=e.data,n=e.patient_id,a=r.R.map((function(e){return e.name})).reduce((function(e,n){return e[n]=t[n],e}),{});return{dynamicQuestions:{dynamicKeys:Object.keys(t).map((function(e){return Number(e)})),dynamicData:t},preDefinedQuestions:a,patient_id:n}},u=function(e){for(var t=e.patient_id,n=e.data,a=[],r=0,s=Object.entries(n);r<s.length;r++){var c=(0,i.Z)(s[r],2),d=c[0],o=c[1];if(o){var u=null===d||void 0===d?void 0:d.split("-"),l=(0,i.Z)(u,3),m=l[0],f=l[1],p=l[2],h=null===o||void 0===o?void 0:o.split("-"),v=(0,i.Z)(h,3),g=v[0],_=v[1],x=v[2];a.push({patient_id:parseInt(m),section_id:parseInt(f),section_question_id:parseInt(p),section_option_id:parseInt(g),answer_text:x,is_answer_in_urdu:Boolean(Number(_))})}}return{patient_id:t,data:a}};function l(e){var t=e.data,n=e.children,i=e.noOfChildren,s=e.patient_id,c=r.R.map((function(e){return e.name})).reduce((function(e,n){return e[n]=t[n],e}),{});c.no_of_children=i,n.forEach((function(e){var t,n;c.children_age=c.children_age?c.children_age+","+e.age.toString():e.age.toString(),c.children_education_level=c.children_education_level?c.children_education_level+","+(null===(t=e.education_level)||void 0===t?void 0:t.replace(","," ").toString()):null===(n=e.education_level)||void 0===n?void 0:n.replace(","," ").toString()}));var d={dynamicQuestions:{dynamicKeys:Object.keys(t).map((function(e){return Number(e)})),dynamicData:t},preDefinedQuestions:c};return s?(0,a.Z)((0,a.Z)({},d),{},{patient_id:s}):d}},5142:function(e,t,n){n.d(t,{s4:function(){return m},xi:function(){return p},QI:function(){return _},yw:function(){return Z},c3:function(){return v},sT:function(){return o},vZ:function(){return u},Wl:function(){return f},zS:function(){return x},LO:function(){return h},o9:function(){return y},YS:function(){return l},HR:function(){return g}});var a=n(3144),i=n(5671),r=n(7976),s=(0,a.Z)((function e(){(0,i.Z)(this,e)}));s.getLatestFilledForms=function(e){var t=e._pageNo,n=e._count,a="/api/form/list-latest-filled-forms?_pageNo=".concat(t,"&_count=").concat(n);return r.Z.get(a)},s.getPatientEditForm=function(e){var t=e.id,n="/api/form/get-edit-demo?id=".concat(t,"&type=patient");return r.Z.get(n)},s.updatePatientDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return r.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i,type:"patient"})},s.getCaregiverEditForm=function(e){var t=e.id,n="/api/form/get-edit-demo?id=".concat(t,"&type=caregiver");return r.Z.get(n)},s.updateCaregiverDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return r.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i,type:"caregiver"})},s.getChildEditForm=function(e){var t=e.id,n="/api/form/get-edit-demo?id=".concat(t,"&type=child");return r.Z.get(n)},s.updateChildDemo=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return r.Z.post("/api/form/update-edit-demo",{dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i,type:"child"})},s.getEditPatientScales=function(e){var t=e.id,n="/api/form/get-edit-scale?id=".concat(t,"&type=patient");return r.Z.get(n)},s.updatePatientScales=function(e){var t=e.patient_id,n=e.scales;return r.Z.post("/api/form/update-edit-scale",{patient_id:t,scales:n,type:"patient"})},s.getEditCaregiverScales=function(e){var t=e.id,n="/api/form/get-edit-scale?id=".concat(t,"&type=caregiver");return r.Z.get(n)},s.updateCaregiverScales=function(e){var t=e.patient_id,n=e.scales;return r.Z.post("/api/form/update-edit-scale",{patient_id:t,scales:n,type:"caregiver"})},s.getEditChildScales=function(e){var t=e.id,n="/api/form/get-edit-scale?id=".concat(t,"&type=child");return r.Z.get(n)},s.updateChildScales=function(e){var t=e.patient_id,n=e.scales;return r.Z.post("/api/form/update-edit-scale",{patient_id:t,scales:n,type:"child"})};var c=s,d=n(3984),o=function(e){return c.getLatestFilledForms(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},u=function(e){return c.getPatientEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},l=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return c.updatePatientDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},m=function(e){return c.getCaregiverEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},f=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return c.updateCaregiverDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},p=function(e){return c.getChildEditForm(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},h=function(e){var t=e.dynamicQuestions,n=e.preDefinedQuestions,a=e.demo_id,i=e.patient_id;return c.updateChildDemo({dynamicQuestions:t,preDefinedQuestions:n,demo_id:a,patient_id:i}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},v=function(e){var t=e.id;return c.getEditPatientScales({id:t}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},g=function(e){var t=e.patient_id,n=e.scales;return c.updatePatientScales({patient_id:t,scales:n}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},_=function(e){var t=e.id;return c.getEditCaregiverScales({id:t}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return console.log(e),(0,d.Z)(e)}))},x=function(e){var t=e.patient_id,n=e.scales;return c.updateCaregiverScales({patient_id:t,scales:n}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},Z=function(e){var t=e.id;return c.getEditChildScales({id:t}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))},y=function(e){var t=e.patient_id,n=e.scales;return c.updateChildScales({patient_id:t,scales:n}).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,d.Z)(e)}))}},9140:function(e,t,n){n.d(t,{Z:function(){return D}});var a=n(1413),i=n(5987),r=n(1694),s=n.n(r),c=n(2791),d=n(162),o=n(6543),u=n(3689),l=n(184),m=["bsPrefix","className","variant","as"],f=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.variant,o=e.as,u=void 0===o?"img":o,f=(0,i.Z)(e,m),p=(0,d.vE)(n,"card-img");return(0,l.jsx)(u,(0,a.Z)({ref:t,className:s()(c?"".concat(p,"-").concat(c):p,r)},f))}));f.displayName="CardImg";var p=f,h=n(6040),v=["bsPrefix","className","as"],g=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.as,u=void 0===o?"div":o,m=(0,i.Z)(e,v),f=(0,d.vE)(n,"card-header"),p=(0,c.useMemo)((function(){return{cardHeaderBsPrefix:f}}),[f]);return(0,l.jsx)(h.Z.Provider,{value:p,children:(0,l.jsx)(u,(0,a.Z)((0,a.Z)({ref:t},m),{},{className:s()(r,f)}))})}));g.displayName="CardHeader";var _=g,x=["bsPrefix","className","bg","text","border","body","children","as"],Z=(0,u.Z)("h5"),y=(0,u.Z)("h6"),N=(0,o.Z)("card-body"),j=(0,o.Z)("card-title",{Component:Z}),b=(0,o.Z)("card-subtitle",{Component:y}),C=(0,o.Z)("card-link",{Component:"a"}),S=(0,o.Z)("card-text",{Component:"p"}),Q=(0,o.Z)("card-footer"),E=(0,o.Z)("card-img-overlay"),w=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.bg,o=e.text,u=e.border,m=e.body,f=e.children,p=e.as,h=void 0===p?"div":p,v=(0,i.Z)(e,x),g=(0,d.vE)(n,"card");return(0,l.jsx)(h,(0,a.Z)((0,a.Z)({ref:t},v),{},{className:s()(r,g,c&&"bg-".concat(c),o&&"text-".concat(o),u&&"border-".concat(u)),children:m?(0,l.jsx)(N,{children:f}):f}))}));w.displayName="Card",w.defaultProps={body:!1};var D=Object.assign(w,{Img:p,Title:j,Subtitle:b,Body:N,Link:C,Text:S,Header:_,Footer:Q,ImgOverlay:E})},6040:function(e,t,n){var a=n(2791).createContext(null);a.displayName="CardHeaderContext",t.Z=a},9743:function(e,t,n){var a=n(1413),i=n(5987),r=n(1694),s=n.n(r),c=n(2791),d=n(162),o=n(184),u=["bsPrefix","className","as"],l=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,c=e.as,l=void 0===c?"div":c,m=(0,i.Z)(e,u),f=(0,d.vE)(n,"row"),p=(0,d.pi)(),h=(0,d.zG)(),v="".concat(f,"-cols"),g=[];return p.forEach((function(e){var t,n=m[e];delete m[e],t=null!=n&&"object"===typeof n?n.cols:n;var a=e!==h?"-".concat(e):"";null!=t&&g.push("".concat(v).concat(a,"-").concat(t))})),(0,o.jsx)(l,(0,a.Z)((0,a.Z)({ref:t},m),{},{className:s().apply(void 0,[r,f].concat(g))}))}));l.displayName="Row",t.Z=l}}]);
//# sourceMappingURL=511.89fcbc54.chunk.js.map