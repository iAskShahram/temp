"use strict";(self.webpackChunkthis=self.webpackChunkthis||[]).push([[32],{3032:function(e,s,l){l.r(s);var a=l(4165),c=l(5861),o=l(4942),r=l(1413),n=l(885),t=l(2791),i=l(3073),d=l(9492),m=l(7689),u=l(1885),f=l.n(u),v=l(9085),p=l(6536),h=l(8898),g=l(6725),x=l(184);s.default=function(){var e=(0,t.useRef)(new(f())),s=(0,m.s0)(),l=(0,m.TH)().state,u=((0,t.useMemo)((function(){return JSON.parse(localStorage.getItem("user"))}),[]),(0,h.G)().getUserProfile_c),N=(0,t.useState)(u()),b=(0,n.Z)(N,2),j=b[0],w=(b[1],(0,t.useRef)(null)),y=(0,t.useState)([]),_=(0,n.Z)(y,2),C=_[0],Z=_[1],S=(0,t.useState)({name:"",cnic:"",dob:"",email:"",phone:"",gender:"",role:""}),k=(0,n.Z)(S,2),q=k[0],A=k[1];function R(s){var l=s.target,a=l.name,c=l.value;e.current.showMessageFor(a),A((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,o.Z)({},a,c))}))}function E(){return(E=(0,c.Z)((0,a.Z)().mark((function e(){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.et)(Number(w.current));case 2:200===(s=e.sent).status?A(s.data):v.Am.error("Unable to fetch User Data");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,c.Z)((0,a.Z)().mark((function e(){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.z)({_pageNo:1,_count:1e3});case 2:200===(s=e.sent).status?Z(s.data.cities):s.status>=400&&v.Am.warn("failed to get cities");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=(0,c.Z)((0,a.Z)().mark((function e(){var l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Nq)(q,Number(q.id));case 2:200===(l=e.sent).status?(v.Am.success("User updated"),s("/list-users")):l.status>=400&&v.Am.warn(l.message.message);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(s){s.preventDefault(),e.current.allValid()?function(){U.apply(this,arguments)}():e.current.showMessages()}return(0,t.useEffect)((function(){var e;null!==l&&void 0!==l&&l.id&&Object.keys(j).length&&(null===(e=j.role)||void 0===e?void 0:e.toLowerCase().trim())!==g.t.USER?(w.current=l.id,function(){E.apply(this,arguments)}(),function(){T.apply(this,arguments)}()):s("/")}),[]),(0,p.Z)("Update User"),(0,x.jsxs)("div",{className:"my-8 card",children:[(0,x.jsx)("div",{className:"card-header border-0 cursor-pointer",role:"button","data-bs-toggle":"collapse","data-bs-target":"#kt_account_profile_details","aria-expanded":"true","aria-controls":"kt_account_profile_details",children:(0,x.jsx)("div",{className:"card-title m-0",children:(0,x.jsx)("h3",{className:"fw-bolder m-0",children:"Update User"})})}),(0,x.jsxs)("form",{id:"kt_account_profile_details",className:"collapse show",onSubmit:function(e){return D(e)},children:[(0,x.jsx)("div",{id:"kt_account_profile_details_form",className:"form fv-plugins-bootstrap5 fv-plugins-framework",noValidate:"novalidate"}),(0,x.jsxs)("div",{className:"card-body border-top p-9",children:[(0,x.jsx)("div",{className:"row mb-6"}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Name"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:q.name,type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Name"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"CNIC"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:q.cnic,type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"CNIC"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Date of Birth"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:q.dob.split("T")[0],type:"text",className:"form-control form-control-lg form-control-solid",placeholder:"Date of birth"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Gender"}),(0,x.jsx)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:(0,x.jsxs)("select",{disabled:!0,id:"gender",name:"gender",value:q.gender,className:"form-control form-control-lg form-control-solid",children:[(0,x.jsx)("option",{value:"",children:"Select"}),(0,x.jsx)("option",{value:"male",children:"male"}),(0,x.jsx)("option",{value:"female",children:"female"})]})})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"City"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsxs)("select",{id:"city",name:"city_id",value:q.city_id,className:"form-control form-control-lg form-control-solid",onChange:R,children:[(0,x.jsx)("option",{value:"",children:"Select"}),C.map((function(e,s){return(0,x.jsx)("option",{value:e.id,children:e.name},s)}))]}),e.current.message("city",q.city_id,"required",{messgae:"City is required",className:"text-danger"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Phone"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{onChange:R,value:q.phone,type:"text",name:"phone",className:"form-control form-control-lg form-control-solid",placeholder:"Contact Number"}),e.current.message("phone",q.phone,"required|numeric|min:11",{messgae:"Phone is required",className:"text-danger"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Email"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsx)("input",{disabled:!0,value:q.email,type:"text",name:"email",className:"form-control form-control-lg form-control-solid",placeholder:"Email"}),e.current.message("email",q.email,"required|email",{messgae:"email is required",className:"text-danger"}),(0,x.jsx)("div",{className:"fv-plugins-message-container invalid-feedback"})]})]}),(0,x.jsxs)("div",{className:"row mb-6",children:[(0,x.jsx)("div",{className:"col-1"}),(0,x.jsx)("label",{className:"col-lg-2 col-md-2 col-sm-4 col-form-label required fw-bold fs-6",children:"Role"}),(0,x.jsxs)("div",{className:"col-lg-9 col-md-9 col-sm-8 fv-row fv-plugins-icon-container",children:[(0,x.jsxs)("select",{id:"role",name:"role",value:q.role,onChange:R,className:"form-control form-control-lg form-control-solid",children:[(0,x.jsx)("option",{value:"",children:"Select"}),(0,x.jsx)("option",{value:"admin",children:g.t.RESEARCH_ASSISTANT},"1"),(0,x.jsx)("option",{value:"user",children:g.t.DATA_COLLECTOR},"2")]}),e.current.message("role",q.role,"required",{messgae:"Role is required",className:"text-danger"})]})]})]}),(0,x.jsxs)("div",{className:"card-footer d-flex justify-content-end py-6 px-9",children:[(0,x.jsx)("button",{type:"button",onClick:function(e){return s("/list-users")},className:"btn btn-light btn-active-light-primary me-2",children:"Discard"}),(0,x.jsx)("button",{type:"submit",className:"btn btn-primary",id:"kt_account_profile_details_submit",children:"Submit"})]})]})]})]})}},6725:function(e,s,l){l.d(s,{t:function(){return a}});var a={ADMIN:"admin",USER:"user",RESEARCH_ASSISTANT:"Research Assistant",DATA_COLLECTOR:"Data Collector"}},9492:function(e,s,l){l.d(s,{g:function(){return m},z:function(){return d}});var a=l(1413),c=l(3144),o=l(5671),r=l(7976),n=(0,c.Z)((function e(){(0,o.Z)(this,e)}));n.listCities=function(e){var s="/api/city/list-cities?_pageNo=".concat(null===e||void 0===e?void 0:e._pageNo,"&_count=").concat(null===e||void 0===e?void 0:e._count);return r.Z.get(s)},n.createCity=function(e){return r.Z.post("api/city",(0,a.Z)({},e))};var t=n,i=l(3984),d=function(e){return t.listCities(e).then((function(e){return{status:e.status,data:e.data,message:"success"}})).catch((function(e){return(0,i.Z)(e)}))},m=function(e){return t.createCity(e).then((function(e){return{status:e.status,data:e.data,message:"Request Success"}})).catch((function(e){return(0,i.Z)(e)}))}}}]);
//# sourceMappingURL=32.d2e1a284.chunk.js.map