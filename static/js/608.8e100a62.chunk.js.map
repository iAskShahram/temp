{"version":3,"file":"static/js/608.8e100a62.chunk.js","mappings":"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","sources":["component/Reports/Reports.jsx","component/commonComponents/Cards/HelperCards.jsx","helpers/constant.js","store/services/city/city.js","store/actions/city.action.js","store/services/report/report.js","store/actions/report.action.js","utils/report.util.js"],"sourcesContent":["\r\nimport { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\n\r\n\r\nimport { useUserProfile } from '../../context/UserContextProvider.js';\r\nimport { CONSTANTS } from '../../helpers/constant.js';\r\nimport { useTitle } from \"../../helpers/custom-hooks.js\";\r\nimport { listCities } from '../../store/actions/city.action.js';\r\nimport { getFullReport } from '../../store/actions/report.action.js';\r\nimport { createFullXLSXFile } from '../../utils/report.util.js';\r\nimport { PageCard } from \"../commonComponents/Cards/HelperCards.jsx\";\r\n\r\nconst Reports = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst { getUserProfile_c } = useUserProfile();\r\n\r\n\tconst [USER, setUSER] = useState(getUserProfile_c());\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\tconst [cities, setCities] = useState([{}]);\r\n\tconst [centerName, setCenterName] = useState('');\r\n\tconst [formData, setFormData] = useState({\r\n\t\tstartingDate: null,\r\n\t\tendingDate: null,\r\n\t\tcity_id: null,\r\n\t});\r\n\r\n\tconst today = new Date();\r\n\tconst todayDate = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;\r\n\r\n\tuseTitle('Full Reports');\r\n\tuseEffect(() => {\r\n\t\tif (!Object.keys(USER).length || USER.role?.toLowerCase().trim() === CONSTANTS.USER) {\r\n\t\t\tnavigate(\"/\");\r\n\t\t} else {\r\n\t\t\t_listCities();\r\n\t\t}\r\n\t}, []);\r\n\r\n\r\n\tconst handleFormChange = (e) => {\r\n\t\tsetFormData({\r\n\t\t\t...formData,\r\n\t\t\t[e.target.name]: e.target.value,\r\n\t\t});\r\n\t};\r\n\tconst validate = () => {\r\n\t\tif (!formData.startingDate && !formData.endingDate) {\r\n\t\t\ttoast.info('Please select atleast one date');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\tasync function _listCities() {\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconst response = await listCities({\r\n\t\t\t\t_pageNo: 0,\r\n\t\t\t\t_count: 999\r\n\t\t\t});\r\n\t\t\tsetCities(response.data.cities);\r\n\t\t\tsetIsLoading(false);\r\n\t\t} catch (error) {\r\n\t\t\ttoast.error(error.message);\r\n\t\t}\r\n\t}\r\n\r\n\tconst generateReport = async () => {\r\n\t\tif (!validate()) return;\r\n\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconst response = await getFullReport(formData);\r\n\t\t\tif (response.status >= 400) {\r\n\t\t\t\ttoast.error(response.message.message);\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// await createXLSXFile(response.data);\r\n\t\t\tawait createFullXLSXFile({ data: response.data, center: centerName });\r\n\t\t\tsetIsLoading(false);\r\n\t\t} catch (err) {\r\n\t\t\ttoast.error(err.message);\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<PageCard title=\"Full Reports\" isLoading={isLoading}>\r\n\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t<h5>Starting Date</h5>\r\n\t\t\t\t\t<input type='date' name='startingDate' className='form-control' value={formData.startingDate || ''} max={formData.endingDate || todayDate} onChange={handleFormChange} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t<h5>Ending Date</h5>\r\n\t\t\t\t\t<input type='date' name='endingDate' className='form-control' value={formData.endingDate || ''} max={todayDate} min={formData.startingDate || ''} onChange={handleFormChange} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='row mt-5'>\r\n\t\t\t\t<div className='col-6'>\r\n\t\t\t\t\t<h5>Center  <i style={{ fontWeight: 'normal' }}>(optional)</i></h5>\r\n\t\t\t\t\t<select className='form-control' name='city_id' onChange={(e) => { handleFormChange(e); setCenterName(e.target.options[e.target.selectedIndex].text.toLocaleLowerCase().includes('select center') ? '' : e.target.options[e.target.selectedIndex].text); }} disabled={isLoading} >\r\n\t\t\t\t\t\t<option value=''>Select Center</option>\r\n\t\t\t\t\t\t{cities.map((city, i) => (\r\n\t\t\t\t\t\t\t<option key={i} value={city.id}>{city.name}</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<br />\r\n\t\t\t<br />\r\n\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-12'>\r\n\t\t\t\t\t<button className='btn btn-primary float-end' type='button' onClick={generateReport} >Generate Report</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</PageCard>\r\n\t);\r\n};\r\n\r\nexport default Reports;","import Spinner from \"react-bootstrap/Spinner\";\r\n\r\nexport const PageCard = ({ children, title, isLoading, paddingSmall }) => {\r\n\treturn (\r\n\t\t<div className=\"my-8 card \">\r\n\t\t\t<h1 className=\"card-header\">\r\n\t\t\t\t<div className=\"card-title m-0\">\r\n\t\t\t\t\t<h3 className=\"fw-bolder m-0\">{title}</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t{!isLoading ? null : (<div className=\"card-subtitle card-title m-0\">\r\n\t\t\t\t\t<Spinner\r\n\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\tanimation=\"grow\"\r\n\t\t\t\t\t\tsize=\"md\"\r\n\t\t\t\t\t\trole=\"status\"\r\n\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<p className=\"m-0\">Loading ...</p>\r\n\t\t\t\t</div>)}\r\n\r\n\t\t\t</h1>\r\n\t\t\t<div className={`card-body ${isLoading ? 'opacity-50' : null}`}>\r\n\t\t\t\t<div className={`${paddingSmall ? 'p-sm-0 px-md-3 px-lg-10' : 'p-sm-0 px-md-10 px-lg-20'}`} >\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\r\n\r\nexport const CenterTextCard = ({ children, styles }) => {\r\n\treturn (\r\n\t\t<div className={`d-flex align-items-center justify-content-center`} style={styles} >\r\n\t\t\t<div className=\"text-center\">\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport const AlertCard = ({ children, type, message }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className={`alert alert-${type}`} role=\"alert\">\r\n\t\t\t\t<h4 className=\"alert-heading\">{type.replace(/^./, type[0].toUpperCase())}</h4>\r\n\t\t\t\t{message}\r\n\t\t\t\t{/* <hr /> */}\r\n\t\t\t\t{/* Whenever you need to, be sure to use margin utilities to keep things nice and tidy. */}\r\n\t\t\t</div>\r\n\t\t\t{children}\r\n\t\t</>\r\n\t);\r\n};\r\n","export const CONSTANTS = {\r\n\tADMIN: 'admin',\r\n\tUSER: 'user',\r\n\tRESEARCH_ASSISTANT: 'Research Assistant',\r\n\tDATA_COLLECTOR: 'Data Collector',\r\n};","import axiosInstance from '../../../utils/axios.middleware.js';\r\n\r\nclass City {\r\n\r\n\tstatic listCities = (params) => {\r\n\r\n\t\tlet apiPath = `/api/city/list-cities?_pageNo=${params?._pageNo}&_count=${params?._count}`;\r\n\t\treturn axiosInstance.get(apiPath);\r\n\r\n\t};\r\n\r\n\r\n\tstatic createCity = (form) => {\r\n\r\n\t\tlet apiPath = 'api/city';\r\n\t\treturn axiosInstance.post(apiPath, {\r\n\t\t\t...form\r\n\t\t});\r\n\r\n\t};\r\n\r\n}\r\nexport default City;","import City from \"../services/city/city.js\";\r\nimport actionErrorHandler from '../../helpers/actionErrorHandler.js';\r\n\r\nexport const listCities = (params) => {\r\n\treturn City.listCities(params)\r\n\t\t.then((response) => {\r\n\t\t\treturn {\r\n\t\t\t\tstatus: response.status,\r\n\t\t\t\tdata: response.data,\r\n\t\t\t\tmessage: \"success\",\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\treturn actionErrorHandler(e);\r\n\t\t});\r\n};\r\n\r\n\r\n\r\n\r\nexport const createCity = (form) => {\r\n\r\n\treturn City.createCity(form).then(response => {\r\n\t\treturn { status: response.status, data: response.data, message: \"Request Success\" };\r\n\t}).catch(e => {\r\n\t\treturn actionErrorHandler(e);\r\n\t});\r\n\r\n};\r\n","import axiosInstance from '../../../utils/axios.middleware.js';\r\n\r\nclass User {\r\n\r\n\tstatic getFullReport = (form) => {\r\n\r\n\t\tlet apiPath = `/api/report/date?startingDate=${form.startingDate}&endingDate=${form.endingDate}&city_id=${form.city_id}`;\r\n\t\treturn axiosInstance.get(apiPath);\r\n\r\n\t};\r\n\r\n\tstatic getFrequencyReport = (form) => {\r\n\r\n\t\tlet apiPath = `/api/report/frequency?startingDate=${form.startingDate}&endingDate=${form.endingDate}&city_id=${form.city_id}`;\r\n\t\treturn axiosInstance.get(apiPath);\r\n\r\n\t};\r\n\r\n\tstatic getMeanReport = (form) => {\r\n\r\n\t\tlet apiPath = `/api/report/mean?startingDate=${form.startingDate}&endingDate=${form.endingDate}&city_id=${form.city_id}`;\r\n\t\treturn axiosInstance.get(apiPath);\r\n\r\n\t};\r\n\r\n}\r\n\r\nexport default User;","import Report from '../services/report/report.js';\r\nimport actionErrorHandler from '../../helpers/actionErrorHandler.js';\r\n\r\nexport const getFullReport = (form) => {\r\n\treturn Report.getFullReport(form)\r\n\t\t.then((response) => {\r\n\t\t\treturn {\r\n\t\t\t\tstatus: response.status,\r\n\t\t\t\tdata: response.data,\r\n\t\t\t\tmessage: \"Success\",\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\treturn actionErrorHandler(e);\r\n\t\t});\r\n};\r\n\r\nexport const getFrequencyReport = (form) => {\r\n\treturn Report.getFrequencyReport(form)\r\n\t\t.then((response) => {\r\n\t\t\treturn {\r\n\t\t\t\tstatus: response.status,\r\n\t\t\t\tdata: response.data,\r\n\t\t\t\tmessage: \"Success\",\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\treturn actionErrorHandler(e);\r\n\t\t});\r\n};\r\n\r\nexport const getMeanReport = (form) => {\r\n\treturn Report.getMeanReport(form)\r\n\t\t.then((response) => {\r\n\t\t\treturn {\r\n\t\t\t\tstatus: response.status,\r\n\t\t\t\tdata: response.data,\r\n\t\t\t\tmessage: \"Success\",\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\treturn actionErrorHandler(e);\r\n\t\t});\r\n};","import { utils, write } from 'xlsx';\r\n\r\nconst createBufferBlobANDDownload = ({ workbook, fileName }) => {\r\n\tconst excelBuffer = write(workbook, { type: 'array', bookType: 'xlsx' });\r\n\tconst blob = new Blob([excelBuffer], { type: 'array', bookType: 'xlsx' });\r\n\tconst url = window.URL.createObjectURL(blob);\r\n\tconst link = document.createElement('a');\r\n\tlink.href = url;\r\n\tlink.setAttribute('download', `${fileName} - ${new Date().toISOString().split('T')[0]}.xlsx`);\r\n\tdocument.body.appendChild(link);\r\n\tlink.click();\r\n};\r\n\r\nconst frequencyObjectToArray = (obj) => {\r\n\tconst sheets = {};\r\n\tconst sheetNames = Object.keys(obj);\r\n\r\n\tsheetNames.forEach((sheetName) => {\r\n\t\tconst grid = [];\r\n\t\tconst sheetData = obj[sheetName];\r\n\t\tconst sheetDataKeys = Object.keys(sheetData);\r\n\r\n\t\tfor (let i = 0; i < sheetDataKeys.length; i++) {\r\n\t\t\tconst row = [];\r\n\t\t\t// family system, gender etc\r\n\t\t\tconst rowHeader = sheetDataKeys[i];\r\n\t\t\trow.push(rowHeader);\r\n\t\t\trow.push('');\r\n\r\n\t\t\t// {male: 0, female: 100}\r\n\t\t\tconst singleObject = sheetData[rowHeader];\r\n\t\t\tfor (const [key, value] of Object.entries(singleObject)) {\r\n\t\t\t\trow.push(key);\r\n\t\t\t\trow.push(value);\r\n\t\t\t}\r\n\r\n\t\t\t// now a single row is ready, push it to the grid\r\n\t\t\tgrid.push(row);\r\n\t\t}\r\n\r\n\t\t// now a sheet is ready, push it to the sheets\r\n\t\tsheets[sheetName] = grid;\r\n\t});\r\n\treturn sheets;\r\n};\r\n\r\nasync function createFullXLSXFile({ data, center }) {\r\n\tconst { reportData } = data;\r\n\ttry {\r\n\t\tconst patient_aoa = [];\r\n\t\tconst caregiver_aoa = [];\r\n\t\tconst child_aoa = [];\r\n\t\tconst workbook = utils.book_new();\r\n\r\n\t\treportData.forEach((form) => {\r\n\t\t\tpatient_aoa.push([...form.patientDemoData, ...form.patientSectionData]);\r\n\t\t\tcaregiver_aoa.push([...form.caregiverDemoData, ...form.caregiverSectionData]);\r\n\t\t\tchild_aoa.push([...form.childDemoData, ...form.childSectionData]);\r\n\t\t});\r\n\r\n\t\t// creating worksheet, we also have a function ustils.aoa_to_sheet() to convert array of arrays into worksheet\r\n\t\tconst patientWorksheet = utils.aoa_to_sheet(patient_aoa);\r\n\t\tconst caregiverWorksheet = utils.aoa_to_sheet(caregiver_aoa);\r\n\t\tconst childWorksheet = utils.aoa_to_sheet(child_aoa);\r\n\r\n\t\t// adding worksheet to workbook\r\n\t\tutils.book_append_sheet(workbook, patientWorksheet, 'Patient');\r\n\t\tutils.book_append_sheet(workbook, caregiverWorksheet, 'Caregiver');\r\n\t\tutils.book_append_sheet(workbook, childWorksheet, 'Child');\r\n\r\n\t\tconst fileName = `Full Report ${center && `- ${center}`}`;\r\n\r\n\t\tcreateBufferBlobANDDownload({\r\n\t\t\tworkbook,\r\n\t\t\tfileName\r\n\t\t});\r\n\r\n\t\treturn true;\r\n\t} catch (err) {\r\n\t\treturn new Promise((_, reject) => {\r\n\t\t\treject(false);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nasync function createFrequencyXLSXFile({ data, center }) {\r\n\ttry {\r\n\t\tconst workbook = utils.book_new();\r\n\r\n\t\tconst sheets = frequencyObjectToArray(data);\r\n\t\tconst sheetNames = Object.keys(sheets);\r\n\t\tfor (let i = 0; i < sheetNames.length; i++) {\r\n\t\t\tconst sheetName = sheetNames[i];\r\n\t\t\tconst worksheet = utils.aoa_to_sheet(sheets[sheetName]);\r\n\t\t\tconst columnWidths = [\r\n\t\t\t\t{ wch: 50 },\r\n\t\t\t\t{ wch: 5 },\r\n\t\t\t];\r\n\t\t\tworksheet['!cols'] = columnWidths;\r\n\t\t\tutils.book_append_sheet(workbook, worksheet, sheetName);\r\n\t\t}\r\n\r\n\t\tcreateBufferBlobANDDownload({\r\n\t\t\tworkbook,\r\n\t\t\tfileName: `Frequency Report ${center && `- ${center}`}`\r\n\t\t});\r\n\r\n\t\treturn true;\r\n\t} catch (err) {\r\n\t\tthrow new Error(err.message);\r\n\t}\r\n}\r\n\r\nasync function createMeanXLSXFile({ data, center }) {\r\n\ttry {\r\n\t\tconst workbook = utils.book_new();\r\n\r\n\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\tconst entityData = data[i];\r\n\t\t\tconst worksheet = utils.aoa_to_sheet([['Questions', 'Averages'], ...entityData.averages.map((singleAverage) => [singleAverage.question_text, singleAverage.avg])]);\r\n\t\t\tconst columnWidths = [\r\n\t\t\t\t{ wch: 50 },\r\n\t\t\t\t{ wch: 10 },\r\n\t\t\t];\r\n\t\t\tworksheet['!cols'] = columnWidths;\r\n\t\t\tutils.book_append_sheet(workbook, worksheet, entityData.entity);\r\n\t\t}\r\n\r\n\t\tcreateBufferBlobANDDownload({\r\n\t\t\tworkbook,\r\n\t\t\tfileName: `Mean Report ${center && `- ${center}`}`\r\n\t\t});\r\n\r\n\t\treturn true;\r\n\t} catch (err) {\r\n\t\tthrow new Error(err.message);\r\n\t}\r\n}\r\n\r\nexport { createFullXLSXFile, createFrequencyXLSXFile, createMeanXLSXFile };;"],"names":["navigate","useNavigate","getUserProfile_c","useUserProfile","useState","USER","isLoading","setIsLoading","cities","setCities","centerName","setCenterName","startingDate","endingDate","city_id","formData","setFormData","today","Date","todayDate","getFullYear","String","getMonth","padStart","getDate","useTitle","useEffect","Object","keys","length","role","toLowerCase","trim","CONSTANTS","_listCities","handleFormChange","e","target","name","value","listCities","_pageNo","_count","response","data","toast","error","message","generateReport","info","getFullReport","status","createFullXLSXFile","center","title","className","type","max","onChange","min","style","fontWeight","options","selectedIndex","text","toLocaleLowerCase","includes","disabled","map","city","i","id","onClick","PageCard","children","paddingSmall","as","animation","size","CenterTextCard","styles","ADMIN","RESEARCH_ASSISTANT","DATA_COLLECTOR","City","params","apiPath","axiosInstance","get","createCity","form","post","then","catch","actionErrorHandler","User","getFrequencyReport","getMeanReport","Report","createBufferBlobANDDownload","workbook","fileName","excelBuffer","write","bookType","blob","Blob","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","toISOString","split","body","appendChild","click","frequencyObjectToArray","obj","sheets","forEach","sheetName","grid","sheetData","sheetDataKeys","row","rowHeader","push","singleObject","entries","key","reportData","patient_aoa","caregiver_aoa","child_aoa","utils","book_new","patientDemoData","patientSectionData","caregiverDemoData","caregiverSectionData","childDemoData","childSectionData","patientWorksheet","aoa_to_sheet","caregiverWorksheet","childWorksheet","book_append_sheet","Promise","_","reject","createFrequencyXLSXFile","sheetNames","worksheet","columnWidths","wch","Error","createMeanXLSXFile","entityData","averages","singleAverage","question_text","avg","entity"],"sourceRoot":""}